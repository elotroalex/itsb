{"version":3,"sources":["libs/index.js"],"names":["root","factory","define","amd","module","exports","d3","tip","this","direction","offset","html","node","initNode","svg","point","target","vis","el","tagName","toLowerCase","ownerSVGElement","createSVGPoint","document","body","appendChild","show","args","Array","prototype","slice","call","arguments","length","SVGElement","pop","coords","content","apply","poffset","dir","nodel","getNodeEl","i","directions","scrollTop","documentElement","scrollLeft","style","opacity","pointer-events","classed","direction_callbacks","get","top","left","hide","attr","n","v","selection","functor","destroy","remove","map","bbox","getScreenBBox","y","offsetHeight","x","offsetWidth","s","e","w","nw","ne","sw","se","keys","select","createElement","position","box-sizing","targetel","event","getScreenCTM","parentNode","matrix","tbbox","getBBox","width","height","matrixTransform"],"mappings":"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","file":"../../libs/index.js","sourcesContent":["// d3.tip\r\n// Copyright (c) 2013 Justin Palmer\r\n//\r\n// Tooltips for d3.js SVG visualizations\r\n\r\n(function (root, factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module with d3 as a dependency.\r\n    define(['d3'], factory)\r\n  } else if (typeof module === 'object' && module.exports) {\r\n    // CommonJS\r\n    module.exports = function(d3) {\r\n      d3.tip = factory(d3)\r\n      return d3.tip\r\n    }\r\n  } else {\r\n    // Browser global.\r\n    root.d3.tip = factory(root.d3)\r\n  }\r\n}(this, function (d3) {\r\n\r\n  // Public - contructs a new tooltip\r\n  //\r\n  // Returns a tip\r\n  return function() {\r\n    var direction = d3_tip_direction,\r\n        offset    = d3_tip_offset,\r\n        html      = d3_tip_html,\r\n        node      = initNode(),\r\n        svg       = null,\r\n        point     = null,\r\n        target    = null\r\n\r\n    function tip(vis) {\r\n      svg = getSVGNode(vis)\r\n      point = svg.createSVGPoint()\r\n      document.body.appendChild(node)\r\n    }\r\n\r\n    // Public - show the tooltip on the screen\r\n    //\r\n    // Returns a tip\r\n    tip.show = function() {\r\n      var args = Array.prototype.slice.call(arguments)\r\n      if(args[args.length - 1] instanceof SVGElement) target = args.pop()\r\n\r\n      var content = html.apply(this, args),\r\n          poffset = offset.apply(this, args),\r\n          dir     = direction.apply(this, args),\r\n          nodel   = getNodeEl(),\r\n          i       = directions.length,\r\n          coords,\r\n          scrollTop  = document.documentElement.scrollTop || document.body.scrollTop,\r\n          scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft\r\n\r\n      nodel.html(content)\r\n        .style({ opacity: 1, 'pointer-events': 'all' })\r\n\r\n      while(i--) nodel.classed(directions[i], false)\r\n      coords = direction_callbacks.get(dir).apply(this)\r\n      nodel.classed(dir, true).style({\r\n        top: (coords.top +  poffset[0]) + scrollTop + 'px',\r\n        left: (coords.left + poffset[1]) + scrollLeft + 'px'\r\n      })\r\n\r\n      return tip\r\n    }\r\n\r\n    // Public - hide the tooltip\r\n    //\r\n    // Returns a tip\r\n    tip.hide = function() {\r\n      var nodel = getNodeEl()\r\n      nodel.style({ opacity: 0, 'pointer-events': 'none' })\r\n      return tip\r\n    }\r\n\r\n    // Public: Proxy attr calls to the d3 tip container.  Sets or gets attribute value.\r\n    //\r\n    // n - name of the attribute\r\n    // v - value of the attribute\r\n    //\r\n    // Returns tip or attribute value\r\n    tip.attr = function(n, v) {\r\n      if (arguments.length < 2 && typeof n === 'string') {\r\n        return getNodeEl().attr(n)\r\n      } else {\r\n        var args =  Array.prototype.slice.call(arguments)\r\n        d3.selection.prototype.attr.apply(getNodeEl(), args)\r\n      }\r\n\r\n      return tip\r\n    }\r\n\r\n    // Public: Proxy style calls to the d3 tip container.  Sets or gets a style value.\r\n    //\r\n    // n - name of the property\r\n    // v - value of the property\r\n    //\r\n    // Returns tip or style property value\r\n    tip.style = function(n, v) {\r\n      if (arguments.length < 2 && typeof n === 'string') {\r\n        return getNodeEl().style(n)\r\n      } else {\r\n        var args =  Array.prototype.slice.call(arguments)\r\n        d3.selection.prototype.style.apply(getNodeEl(), args)\r\n      }\r\n\r\n      return tip\r\n    }\r\n\r\n    // Public: Set or get the direction of the tooltip\r\n    //\r\n    // v - One of n(north), s(south), e(east), or w(west), nw(northwest),\r\n    //     sw(southwest), ne(northeast) or se(southeast)\r\n    //\r\n    // Returns tip or direction\r\n    tip.direction = function(v) {\r\n      if (!arguments.length) return direction\r\n      direction = v == null ? v : d3.functor(v)\r\n\r\n      return tip\r\n    }\r\n\r\n    // Public: Sets or gets the offset of the tip\r\n    //\r\n    // v - Array of [x, y] offset\r\n    //\r\n    // Returns offset or\r\n    tip.offset = function(v) {\r\n      if (!arguments.length) return offset\r\n      offset = v == null ? v : d3.functor(v)\r\n\r\n      return tip\r\n    }\r\n\r\n    // Public: sets or gets the html value of the tooltip\r\n    //\r\n    // v - String value of the tip\r\n    //\r\n    // Returns html value or tip\r\n    tip.html = function(v) {\r\n      if (!arguments.length) return html\r\n      html = v == null ? v : d3.functor(v)\r\n\r\n      return tip\r\n    }\r\n\r\n    // Public: destroys the tooltip and removes it from the DOM\r\n    //\r\n    // Returns a tip\r\n    tip.destroy = function() {\r\n      if(node) {\r\n        getNodeEl().remove();\r\n        node = null;\r\n      }\r\n      return tip;\r\n    }\r\n\r\n    function d3_tip_direction() { return 'n' }\r\n    function d3_tip_offset() { return [0, 0] }\r\n    function d3_tip_html() { return ' ' }\r\n\r\n    var direction_callbacks = d3.map({\r\n      n:  direction_n,\r\n      s:  direction_s,\r\n      e:  direction_e,\r\n      w:  direction_w,\r\n      nw: direction_nw,\r\n      ne: direction_ne,\r\n      sw: direction_sw,\r\n      se: direction_se\r\n    }),\r\n\r\n    directions = direction_callbacks.keys()\r\n\r\n    function direction_n() {\r\n      var bbox = getScreenBBox()\r\n      return {\r\n        top:  bbox.n.y - node.offsetHeight,\r\n        left: bbox.n.x - node.offsetWidth / 2\r\n      }\r\n    }\r\n\r\n    function direction_s() {\r\n      var bbox = getScreenBBox()\r\n      return {\r\n        top:  bbox.s.y,\r\n        left: bbox.s.x - node.offsetWidth / 2\r\n      }\r\n    }\r\n\r\n    function direction_e() {\r\n      var bbox = getScreenBBox()\r\n      return {\r\n        top:  bbox.e.y - node.offsetHeight / 2,\r\n        left: bbox.e.x\r\n      }\r\n    }\r\n\r\n    function direction_w() {\r\n      var bbox = getScreenBBox()\r\n      return {\r\n        top:  bbox.w.y - node.offsetHeight / 2,\r\n        left: bbox.w.x - node.offsetWidth\r\n      }\r\n    }\r\n\r\n    function direction_nw() {\r\n      var bbox = getScreenBBox()\r\n      return {\r\n        top:  bbox.nw.y - node.offsetHeight,\r\n        left: bbox.nw.x - node.offsetWidth\r\n      }\r\n    }\r\n\r\n    function direction_ne() {\r\n      var bbox = getScreenBBox()\r\n      return {\r\n        top:  bbox.ne.y - node.offsetHeight,\r\n        left: bbox.ne.x\r\n      }\r\n    }\r\n\r\n    function direction_sw() {\r\n      var bbox = getScreenBBox()\r\n      return {\r\n        top:  bbox.sw.y,\r\n        left: bbox.sw.x - node.offsetWidth\r\n      }\r\n    }\r\n\r\n    function direction_se() {\r\n      var bbox = getScreenBBox()\r\n      return {\r\n        top:  bbox.se.y,\r\n        left: bbox.e.x\r\n      }\r\n    }\r\n\r\n    function initNode() {\r\n      var node = d3.select(document.createElement('div'))\r\n      node.style({\r\n        position: 'absolute',\r\n        top: 0,\r\n        opacity: 0,\r\n        'pointer-events': 'none',\r\n        'box-sizing': 'border-box'\r\n      })\r\n\r\n      return node.node()\r\n    }\r\n\r\n    function getSVGNode(el) {\r\n      el = el.node()\r\n      if(el.tagName.toLowerCase() === 'svg')\r\n        return el\r\n\r\n      return el.ownerSVGElement\r\n    }\r\n\r\n    function getNodeEl() {\r\n      if(node === null) {\r\n        node = initNode();\r\n        // re-add node to DOM\r\n        document.body.appendChild(node);\r\n      };\r\n      return d3.select(node);\r\n    }\r\n\r\n    // Private - gets the screen coordinates of a shape\r\n    //\r\n    // Given a shape on the screen, will return an SVGPoint for the directions\r\n    // n(north), s(south), e(east), w(west), ne(northeast), se(southeast), nw(northwest),\r\n    // sw(southwest).\r\n    //\r\n    //    +-+-+\r\n    //    |   |\r\n    //    +   +\r\n    //    |   |\r\n    //    +-+-+\r\n    //\r\n    // Returns an Object {n, s, e, w, nw, sw, ne, se}\r\n    function getScreenBBox() {\r\n      var targetel   = target || d3.event.target;\r\n\r\n      while ('undefined' === typeof targetel.getScreenCTM && 'undefined' === targetel.parentNode) {\r\n          targetel = targetel.parentNode;\r\n      }\r\n\r\n      var bbox       = {},\r\n          matrix     = targetel.getScreenCTM(),\r\n          tbbox      = targetel.getBBox(),\r\n          width      = tbbox.width,\r\n          height     = tbbox.height,\r\n          x          = tbbox.x,\r\n          y          = tbbox.y\r\n\r\n      point.x = x\r\n      point.y = y\r\n      bbox.nw = point.matrixTransform(matrix)\r\n      point.x += width\r\n      bbox.ne = point.matrixTransform(matrix)\r\n      point.y += height\r\n      bbox.se = point.matrixTransform(matrix)\r\n      point.x -= width\r\n      bbox.sw = point.matrixTransform(matrix)\r\n      point.y -= height / 2\r\n      bbox.w  = point.matrixTransform(matrix)\r\n      point.x += width\r\n      bbox.e = point.matrixTransform(matrix)\r\n      point.x -= width / 2\r\n      point.y -= height / 2\r\n      bbox.n = point.matrixTransform(matrix)\r\n      point.y += height\r\n      bbox.s = point.matrixTransform(matrix)\r\n\r\n      return bbox\r\n    }\r\n\r\n    return tip\r\n  };\r\n\r\n}));\r\n"]}