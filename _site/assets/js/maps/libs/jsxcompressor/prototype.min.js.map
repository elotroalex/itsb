{"version":3,"sources":["libs/jsxcompressor/prototype.js"],"names":["Prototype","Version","Browser","ua","navigator","userAgent","isOpera","Object","prototype","toString","call","window","opera","IE","attachEvent","Opera","WebKit","indexOf","Gecko","MobileSafari","test","BrowserFeatures","XPath","document","evaluate","SelectorsAPI","querySelector","ElementExtensions","constructor","Element","HTMLElement","SpecificElementExtensions","HTMLDivElement","div","createElement","form","isSupported","ScriptFragment","JSONFilter","emptyFunction","K","x","Abstract","Try","these","returnValue","i","length","arguments","lambda","e","Class","subclass","create","parent","properties","$A","klass","this","initialize","apply","isFunction","shift","extend","Methods","superclass","subclasses","push","addMethods","source","ancestor","keys","valueOf","property","value","argumentNames","first","method","m","wrap","bind","_toString","destination","isElement","object","nodeType","isUndefined","inspect","String","RangeError","toJSON","results","join","toQueryString","$H","toHTML","interpret","values","clone","isArray","isHash","Hash","isString","isNumber","Function","slice","Array","update","array","args","arrayLength","merge","names","match","replace","split","context","__method","a","bindAsEventListener","event","curry","delay","timeout","setTimeout","defer","wrapper","methodize","_methodized","Date","getUTCFullYear","getUTCMonth","toPaddedString","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","RegExp","escape","str","PeriodicalExecuter","callback","frequency","currentlyExecuting","registerCallback","timer","setInterval","onTimerEvent","execute","stop","clearInterval","specialChar","\b","\t","\n","\f","\r","\\","prepareReplacement","replacement","template","Template","gsub","pattern","result","index","sub","count","scan","iterator","truncate","truncation","strip","stripTags","stripScripts","extractScripts","matchAll","matchOne","map","scriptTag","evalScripts","script","eval","escapeHTML","unescapeHTML","toQueryParams","separator","inject","hash","pair","key","decodeURIComponent","undefined","toArray","succ","fromCharCode","charCodeAt","times","camelize","parts","len","camelized","charAt","toUpperCase","substring","capitalize","toLowerCase","underscore","dasherize","useDoubleQuotes","escapedString","character","unfilterJSON","filter","isJSON","blank","evalJSON","sanitize","json","SyntaxError","include","startsWith","endsWith","d","lastIndexOf","empty","interpolate","trim","parseQuery","Pattern","toTemplateReplacements","before","ctx","expr","exec","$break","Enumerable","all","each","any","collect","detect","findAll","found","_each","eachSlice","number","slices","every","some","select","grep","member","inGroupsOf","fillWith","memo","invoke","max","min","partition","trues","falses","pluck","reject","sortBy","criteria","sort","left","right","b","entries","zip","last","pop","collections","concat","size","find","iterable","$w","string","from","arrayProto","forEach","_reverse","reverse","clear","compact","flatten","without","inline","uniq","sorted","intersect","item","j","isNaN","n","toObject","_object","toQueryPair","encodeURIComponent","set","get","unset","$R","start","end","exclusive","ObjectRange","Number","toColorPart","radix","isFinite","abs","Math","round","ceil","floor","Ajax","getTransport","XMLHttpRequest","ActiveXObject","activeRequestCount","$","element","elements","getElementById","Responders","responders","register","responder","unregister","dispatch","request","transport","onCreate","onComplete","Base","options","asynchronous","contentType","encoding","parameters","evalJS","Request","_complete","$super","url","params","response","Response","open","respondToReadyState","onreadystatechange","onStateChange","setRequestHeaders","body","postBody","send","overrideMimeType","dispatchException","readyState","headers","X-Requested-With","X-Prototype-Version","Accept","requestHeaders","extras","name","setRequestHeader","success","status","getStatus","state","Events","headerJSON","getHeader","isSameOrigin","evalResponse","protocol","location","domain","port","getResponseHeader","responseText","exception","onException","statusText","getStatusText","_getHeaderJSON","xml","responseXML","responseJSON","_getResponseJSON","getAllHeaders","getAllResponseHeaders","sanitizeJSON","Updater","container","failure","updateContent","receiver","insertion","insert","PeriodicalUpdater","decay","updater","updateComplete","clearTimeout","lastText","_getElementsByXPath","expression","parentElement","query","XPathResult","ORDERED_NODE_SNAPSHOT_TYPE","snapshotLength","snapshotItem","Node","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","global","SETATTRIBUTE_IGNORES_NAME","elForm","elInput","root","documentElement","setAttribute","appendChild","isBuggy","removeChild","tagName","attributes","cache","writeAttribute","cloneNode","idCounter","visible","style","display","toggle","hide","show","remove","parentNode","el","SELECT_ELEMENT_INNERHTML_BUGGY","innerHTML","nodeName","TABLE_ELEMENT_INNERHTML_BUGGY","tBodies","SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING","s","createTextNode","firstChild","content","toElement","text","_insertionTranslations","tags","_getContentFromAnonymousElement","node","range","ownerDocument","createRange","selectNode","createContextualFragment","replaceChild","insertions","childNodes","position","bottom","id","className","attribute","recursivelyCollect","ancestors","descendants","firstDescendant","nextSibling","immediateDescendants","nextSiblings","previousSiblings","siblings","selector","Selector","up","findElement","down","previous","handlers","previousElementSibling","next","nextElementSibling","findChildElements","adjacent","identify","readAttribute","t","_attributeTranslations","read","getAttribute","write","attr","removeAttribute","getHeight","getDimensions","height","getWidth","width","classNames","ClassNames","hasClassName","elementClassName","addClassName","removeClassName","toggleClassName","cleanWhitespace","nextNode","nodeValue","descendantOf","compareDocumentPosition","contains","scrollTo","pos","cumulativeOffset","getStyle","css","defaultView","getComputedStyle","parseFloat","getOpacity","setStyle","styles","elementStyle","cssText","setOpacity","styleFloat","opacity","offsetWidth","offsetHeight","els","originalVisibility","visibility","originalPosition","originalDisplay","originalWidth","clientWidth","originalHeight","clientHeight","makePositioned","_madePositioned","top","undoPositioned","makeClipping","_overflow","overflow","undoClipping","valueT","valueL","offsetTop","offsetLeft","offsetParent","_returnOffset","positionedOffset","absolutize","offsets","_originalLeft","_originalTop","_originalWidth","_originalHeight","relativize","cumulativeScrollOffset","scrollTop","scrollLeft","getOffsetParent","viewportOffset","forElement","clonePosition","setLeft","setTop","setWidth","setHeight","p","delta","getElementsBySelector","childElements","htmlFor","proceed","dim","parseInt","val","title","zoom","currentStyle","stripAlpha","hasLayout","classProp","forProp","class","for","_getAttr","_getAttr2","_getAttrNode","getAttributeNode","_getEv","onclick","f","_flag","hasAttribute","cellpadding","cellspacing","checked","has","v","href","src","type","action","disabled","readonly","multiple","onload","onunload","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onfocus","onblur","onkeypress","onkeydown","onkeyup","onsubmit","onreset","onselect","onchange","nodes","getElementsByTagName","_descendants","fragments","insertBefore","outerHTML","l","html","after","TABLE","TBODY","TR","TD","SELECT","THEAD","TFOOT","TH","Simulated","specified","ByTag","extendElementWith","methods","HTMLOBJECTELEMENT_PROTOTYPE_BUGGY","proto","random","checkDeficiency","_extendedByPrototype","refresh","F","T","Form","FORM","INPUT","TEXTAREA","copy","onlyIfAbsent","findDOMClass","trans","OPTGROUP","P","FIELDSET","UL","OL","DL","DIR","H1","H2","H3","H4","H5","H6","Q","INS","DEL","A","IMG","CAPTION","COL","COLGROUP","FRAMESET","IFRAME","elementPrototype","tag","viewport","getScrollOffsets","pageXOffset","pageYOffset","B","doc","define","D","version","Storage","UID","getStorage","uid","_prototypeUID","store","retrieve","defaultValue","deep","shouldUseSelectorsAPI","mode","shouldUseXPath","compileXPathMatcher","compileMatcher","IS_DESCENDANT_SELECTOR_BUGGY","CASE_INSENSITIVE_CLASS_NAMES","_div","ps","patterns","h","c","le","_cache","matcher","re","xpath","findElements","oldId","querySelectorAll","tokens","as","assertions","matches","token","$$","compatMode","span","isIgnored","descendant","child","laterSibling","attrPresence","operators","pseudo","pseudos","=","!=","^=","$=","*=","~=","|=","first-child","last-child","only-child","enabled","not","exclusion","nth-child","nth","nth-last-child","nth-of-type","nth-last-of-type","first-of-type","last-of-type","only-of-type","fragment","mm","formula","mark","_true","_countedByPrototype","unmark","ofType","nodeIndex","unique","previousSibling","combinator","uTagName","targetNode","sourceIndex","byClassName","nodeClassName","needle","operator","handler","getIndices","total","indexed","indices","exclusions","nv","expressions","matchElements","reset","serializeElements","submitted","submit","data","getValue","serialize","getElements","arr","serializers","Serializers","getInputs","typeName","inputs","matchingInputs","input","disable","enable","findFirstElement","firstByIndex","tabIndex","focusFirstElement","activate","focus","setValue","present","Field","$F","inputSelector","textarea","opt","currentValue","single","optionValue","selected","selectOne","selectedIndex","selectMany","TimedObserver","lastValue","Observer","EventObserver","registerFormCallbacks","onElementEvent","Event","observe","_isButton","KEY_BACKSPACE","KEY_TAB","KEY_RETURN","KEY_ESC","KEY_LEFT","KEY_UP","KEY_RIGHT","KEY_DOWN","KEY_DELETE","KEY_HOME","KEY_END","KEY_PAGEUP","KEY_PAGEDOWN","KEY_INSERT","docEl","MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED","buttonMap","0","1","2","code","button","which","metaKey","pointerX","docElement","pageX","clientX","clientLeft","pointerY","pageY","clientY","clientTop","isLeftClick","isMiddleClick","isRightClick","target","currentTarget","pointer","y","preventDefault","stopPropagation","stopped","cancelBubble","srcElement","relatedTarget","fromElement","_relatedTarget","createEvent","__proto__","CACHE","stopObserving","addEventListener","_getDOMEventName","eventName","registry","respondersForEvent","_createResponder","actualEventName","r","removeEventListener","detachEvent","fire","bubble","dispatchEvent","initEvent","createEventObject","eventType","fireEvent","translations","mouseenter","mouseleave","loaded","fireContentLoadedEvent","checkReadyState","pollDoScroll","doScroll","Toggle","childOf","Insertion","Before","Top","Bottom","After","$continue","Error","Position","includeScrollOffsets","prepare","deltaX","deltaY","within","withinIncludingScrolloffsets","xcomp","ycomp","offset","offsetcache","overlap","realOffset","page","getElementsByClassName","instanceMethods","iter","cond","cn","add","classNameToAdd","classNameToRemove"],"mappings":"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","file":"../../../libs/jsxcompressor/prototype.min.js","sourcesContent":["/*  Prototype JavaScript framework, version 1.6.1\n *  (c) 2005-2009 Sam Stephenson\n *\n *  Prototype is freely distributable under the terms of an MIT-style license.\n *  For details, see the Prototype web site: http://www.prototypejs.org/\n *\n *--------------------------------------------------------------------------*/\n\nvar Prototype = {\n  Version: '1.6.1',\n\n  Browser: (function(){\n    var ua = navigator.userAgent;\n    var isOpera = Object.prototype.toString.call(window.opera) == '[object Opera]';\n    return {\n      IE:             !!window.attachEvent && !isOpera,\n      Opera:          isOpera,\n      WebKit:         ua.indexOf('AppleWebKit/') > -1,\n      Gecko:          ua.indexOf('Gecko') > -1 && ua.indexOf('KHTML') === -1,\n      MobileSafari:   /Apple.*Mobile.*Safari/.test(ua)\n    }\n  })(),\n\n  BrowserFeatures: {\n    XPath: !!document.evaluate,\n    SelectorsAPI: !!document.querySelector,\n    ElementExtensions: (function() {\n      var constructor = window.Element || window.HTMLElement;\n      return !!(constructor && constructor.prototype);\n    })(),\n    SpecificElementExtensions: (function() {\n      if (typeof window.HTMLDivElement !== 'undefined')\n        return true;\n\n      var div = document.createElement('div');\n      var form = document.createElement('form');\n      var isSupported = false;\n\n      if (div['__proto__'] && (div['__proto__'] !== form['__proto__'])) {\n        isSupported = true;\n      }\n\n      div = form = null;\n\n      return isSupported;\n    })()\n  },\n\n  ScriptFragment: '<script[^>]*>([\\\\S\\\\s]*?)<\\/script>',\n  JSONFilter: /^\\/\\*-secure-([\\s\\S]*)\\*\\/\\s*$/,\n\n  emptyFunction: function() { },\n  K: function(x) { return x }\n};\n\nif (Prototype.Browser.MobileSafari)\n  Prototype.BrowserFeatures.SpecificElementExtensions = false;\n\n\nvar Abstract = { };\n\n\nvar Try = {\n  these: function() {\n    var returnValue;\n\n    for (var i = 0, length = arguments.length; i < length; i++) {\n      var lambda = arguments[i];\n      try {\n        returnValue = lambda();\n        break;\n      } catch (e) { }\n    }\n\n    return returnValue;\n  }\n};\n\n/* Based on Alex Arnell's inheritance implementation. */\n\nvar Class = (function() {\n  function subclass() {};\n  function create() {\n    var parent = null, properties = $A(arguments);\n    if (Object.isFunction(properties[0]))\n      parent = properties.shift();\n\n    function klass() {\n      this.initialize.apply(this, arguments);\n    }\n\n    Object.extend(klass, Class.Methods);\n    klass.superclass = parent;\n    klass.subclasses = [];\n\n    if (parent) {\n      subclass.prototype = parent.prototype;\n      klass.prototype = new subclass;\n      parent.subclasses.push(klass);\n    }\n\n    for (var i = 0; i < properties.length; i++)\n      klass.addMethods(properties[i]);\n\n    if (!klass.prototype.initialize)\n      klass.prototype.initialize = Prototype.emptyFunction;\n\n    klass.prototype.constructor = klass;\n    return klass;\n  }\n\n  function addMethods(source) {\n    var ancestor   = this.superclass && this.superclass.prototype;\n    var properties = Object.keys(source);\n\n    if (!Object.keys({ toString: true }).length) {\n      if (source.toString != Object.prototype.toString)\n        properties.push(\"toString\");\n      if (source.valueOf != Object.prototype.valueOf)\n        properties.push(\"valueOf\");\n    }\n\n    for (var i = 0, length = properties.length; i < length; i++) {\n      var property = properties[i], value = source[property];\n      if (ancestor && Object.isFunction(value) &&\n          value.argumentNames().first() == \"$super\") {\n        var method = value;\n        value = (function(m) {\n          return function() { return ancestor[m].apply(this, arguments); };\n        })(property).wrap(method);\n\n        value.valueOf = method.valueOf.bind(method);\n        value.toString = method.toString.bind(method);\n      }\n      this.prototype[property] = value;\n    }\n\n    return this;\n  }\n\n  return {\n    create: create,\n    Methods: {\n      addMethods: addMethods\n    }\n  };\n})();\n(function() {\n\n  var _toString = Object.prototype.toString;\n\n  function extend(destination, source) {\n    for (var property in source)\n      destination[property] = source[property];\n    return destination;\n  }\n\n  function inspect(object) {\n    try {\n      if (isUndefined(object)) return 'undefined';\n      if (object === null) return 'null';\n      return object.inspect ? object.inspect() : String(object);\n    } catch (e) {\n      if (e instanceof RangeError) return '...';\n      throw e;\n    }\n  }\n\n  function toJSON(object) {\n    var type = typeof object;\n    switch (type) {\n      case 'undefined':\n      case 'function':\n      case 'unknown': return;\n      case 'boolean': return object.toString();\n    }\n\n    if (object === null) return 'null';\n    if (object.toJSON) return object.toJSON();\n    if (isElement(object)) return;\n\n    var results = [];\n    for (var property in object) {\n      var value = toJSON(object[property]);\n      if (!isUndefined(value))\n        results.push(property.toJSON() + ': ' + value);\n    }\n\n    return '{' + results.join(', ') + '}';\n  }\n\n  function toQueryString(object) {\n    return $H(object).toQueryString();\n  }\n\n  function toHTML(object) {\n    return object && object.toHTML ? object.toHTML() : String.interpret(object);\n  }\n\n  function keys(object) {\n    var results = [];\n    for (var property in object)\n      results.push(property);\n    return results;\n  }\n\n  function values(object) {\n    var results = [];\n    for (var property in object)\n      results.push(object[property]);\n    return results;\n  }\n\n  function clone(object) {\n    return extend({ }, object);\n  }\n\n  function isElement(object) {\n    return !!(object && object.nodeType == 1);\n  }\n\n  function isArray(object) {\n    return _toString.call(object) == \"[object Array]\";\n  }\n\n\n  function isHash(object) {\n    return object instanceof Hash;\n  }\n\n  function isFunction(object) {\n    return typeof object === \"function\";\n  }\n\n  function isString(object) {\n    return _toString.call(object) == \"[object String]\";\n  }\n\n  function isNumber(object) {\n    return _toString.call(object) == \"[object Number]\";\n  }\n\n  function isUndefined(object) {\n    return typeof object === \"undefined\";\n  }\n\n  extend(Object, {\n    extend:        extend,\n    inspect:       inspect,\n    toJSON:        toJSON,\n    toQueryString: toQueryString,\n    toHTML:        toHTML,\n    keys:          keys,\n    values:        values,\n    clone:         clone,\n    isElement:     isElement,\n    isArray:       isArray,\n    isHash:        isHash,\n    isFunction:    isFunction,\n    isString:      isString,\n    isNumber:      isNumber,\n    isUndefined:   isUndefined\n  });\n})();\nObject.extend(Function.prototype, (function() {\n  var slice = Array.prototype.slice;\n\n  function update(array, args) {\n    var arrayLength = array.length, length = args.length;\n    while (length--) array[arrayLength + length] = args[length];\n    return array;\n  }\n\n  function merge(array, args) {\n    array = slice.call(array, 0);\n    return update(array, args);\n  }\n\n  function argumentNames() {\n    var names = this.toString().match(/^[\\s\\(]*function[^(]*\\(([^)]*)\\)/)[1]\n      .replace(/\\/\\/.*?[\\r\\n]|\\/\\*(?:.|[\\r\\n])*?\\*\\//g, '')\n      .replace(/\\s+/g, '').split(',');\n    return names.length == 1 && !names[0] ? [] : names;\n  }\n\n  function bind(context) {\n    if (arguments.length < 2 && Object.isUndefined(arguments[0])) return this;\n    var __method = this, args = slice.call(arguments, 1);\n    return function() {\n      var a = merge(args, arguments);\n      return __method.apply(context, a);\n    }\n  }\n\n  function bindAsEventListener(context) {\n    var __method = this, args = slice.call(arguments, 1);\n    return function(event) {\n      var a = update([event || window.event], args);\n      return __method.apply(context, a);\n    }\n  }\n\n  function curry() {\n    if (!arguments.length) return this;\n    var __method = this, args = slice.call(arguments, 0);\n    return function() {\n      var a = merge(args, arguments);\n      return __method.apply(this, a);\n    }\n  }\n\n  function delay(timeout) {\n    var __method = this, args = slice.call(arguments, 1);\n    timeout = timeout * 1000\n    return window.setTimeout(function() {\n      return __method.apply(__method, args);\n    }, timeout);\n  }\n\n  function defer() {\n    var args = update([0.01], arguments);\n    return this.delay.apply(this, args);\n  }\n\n  function wrap(wrapper) {\n    var __method = this;\n    return function() {\n      var a = update([__method.bind(this)], arguments);\n      return wrapper.apply(this, a);\n    }\n  }\n\n  function methodize() {\n    if (this._methodized) return this._methodized;\n    var __method = this;\n    return this._methodized = function() {\n      var a = update([this], arguments);\n      return __method.apply(null, a);\n    };\n  }\n\n  return {\n    argumentNames:       argumentNames,\n    bind:                bind,\n    bindAsEventListener: bindAsEventListener,\n    curry:               curry,\n    delay:               delay,\n    defer:               defer,\n    wrap:                wrap,\n    methodize:           methodize\n  }\n})());\n\n\nDate.prototype.toJSON = function() {\n  return '\"' + this.getUTCFullYear() + '-' +\n    (this.getUTCMonth() + 1).toPaddedString(2) + '-' +\n    this.getUTCDate().toPaddedString(2) + 'T' +\n    this.getUTCHours().toPaddedString(2) + ':' +\n    this.getUTCMinutes().toPaddedString(2) + ':' +\n    this.getUTCSeconds().toPaddedString(2) + 'Z\"';\n};\n\n\nRegExp.prototype.match = RegExp.prototype.test;\n\nRegExp.escape = function(str) {\n  return String(str).replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\nvar PeriodicalExecuter = Class.create({\n  initialize: function(callback, frequency) {\n    this.callback = callback;\n    this.frequency = frequency;\n    this.currentlyExecuting = false;\n\n    this.registerCallback();\n  },\n\n  registerCallback: function() {\n    this.timer = setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);\n  },\n\n  execute: function() {\n    this.callback(this);\n  },\n\n  stop: function() {\n    if (!this.timer) return;\n    clearInterval(this.timer);\n    this.timer = null;\n  },\n\n  onTimerEvent: function() {\n    if (!this.currentlyExecuting) {\n      try {\n        this.currentlyExecuting = true;\n        this.execute();\n        this.currentlyExecuting = false;\n      } catch(e) {\n        this.currentlyExecuting = false;\n        throw e;\n      }\n    }\n  }\n});\nObject.extend(String, {\n  interpret: function(value) {\n    return value == null ? '' : String(value);\n  },\n  specialChar: {\n    '\\b': '\\\\b',\n    '\\t': '\\\\t',\n    '\\n': '\\\\n',\n    '\\f': '\\\\f',\n    '\\r': '\\\\r',\n    '\\\\': '\\\\\\\\'\n  }\n});\n\nObject.extend(String.prototype, (function() {\n\n  function prepareReplacement(replacement) {\n    if (Object.isFunction(replacement)) return replacement;\n    var template = new Template(replacement);\n    return function(match) { return template.evaluate(match) };\n  }\n\n  function gsub(pattern, replacement) {\n    var result = '', source = this, match;\n    replacement = prepareReplacement(replacement);\n\n    if (Object.isString(pattern))\n      pattern = RegExp.escape(pattern);\n\n    if (!(pattern.length || pattern.source)) {\n      replacement = replacement('');\n      return replacement + source.split('').join(replacement) + replacement;\n    }\n\n    while (source.length > 0) {\n      if (match = source.match(pattern)) {\n        result += source.slice(0, match.index);\n        result += String.interpret(replacement(match));\n        source  = source.slice(match.index + match[0].length);\n      } else {\n        result += source, source = '';\n      }\n    }\n    return result;\n  }\n\n  function sub(pattern, replacement, count) {\n    replacement = prepareReplacement(replacement);\n    count = Object.isUndefined(count) ? 1 : count;\n\n    return this.gsub(pattern, function(match) {\n      if (--count < 0) return match[0];\n      return replacement(match);\n    });\n  }\n\n  function scan(pattern, iterator) {\n    this.gsub(pattern, iterator);\n    return String(this);\n  }\n\n  function truncate(length, truncation) {\n    length = length || 30;\n    truncation = Object.isUndefined(truncation) ? '...' : truncation;\n    return this.length > length ?\n      this.slice(0, length - truncation.length) + truncation : String(this);\n  }\n\n  function strip() {\n    return this.replace(/^\\s+/, '').replace(/\\s+$/, '');\n  }\n\n  function stripTags() {\n    return this.replace(/<\\w+(\\s+(\"[^\"]*\"|'[^']*'|[^>])+)?>|<\\/\\w+>/gi, '');\n  }\n\n  function stripScripts() {\n    return this.replace(new RegExp(Prototype.ScriptFragment, 'img'), '');\n  }\n\n  function extractScripts() {\n    var matchAll = new RegExp(Prototype.ScriptFragment, 'img');\n    var matchOne = new RegExp(Prototype.ScriptFragment, 'im');\n    return (this.match(matchAll) || []).map(function(scriptTag) {\n      return (scriptTag.match(matchOne) || ['', ''])[1];\n    });\n  }\n\n  function evalScripts() {\n    return this.extractScripts().map(function(script) { return eval(script) });\n  }\n\n  function escapeHTML() {\n    return this.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\n  }\n\n  function unescapeHTML() {\n    return this.stripTags().replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');\n  }\n\n\n  function toQueryParams(separator) {\n    var match = this.strip().match(/([^?#]*)(#.*)?$/);\n    if (!match) return { };\n\n    return match[1].split(separator || '&').inject({ }, function(hash, pair) {\n      if ((pair = pair.split('='))[0]) {\n        var key = decodeURIComponent(pair.shift());\n        var value = pair.length > 1 ? pair.join('=') : pair[0];\n        if (value != undefined) value = decodeURIComponent(value);\n\n        if (key in hash) {\n          if (!Object.isArray(hash[key])) hash[key] = [hash[key]];\n          hash[key].push(value);\n        }\n        else hash[key] = value;\n      }\n      return hash;\n    });\n  }\n\n  function toArray() {\n    return this.split('');\n  }\n\n  function succ() {\n    return this.slice(0, this.length - 1) +\n      String.fromCharCode(this.charCodeAt(this.length - 1) + 1);\n  }\n\n  function times(count) {\n    return count < 1 ? '' : new Array(count + 1).join(this);\n  }\n\n  function camelize() {\n    var parts = this.split('-'), len = parts.length;\n    if (len == 1) return parts[0];\n\n    var camelized = this.charAt(0) == '-'\n      ? parts[0].charAt(0).toUpperCase() + parts[0].substring(1)\n      : parts[0];\n\n    for (var i = 1; i < len; i++)\n      camelized += parts[i].charAt(0).toUpperCase() + parts[i].substring(1);\n\n    return camelized;\n  }\n\n  function capitalize() {\n    return this.charAt(0).toUpperCase() + this.substring(1).toLowerCase();\n  }\n\n  function underscore() {\n    return this.replace(/::/g, '/')\n               .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\n               .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\n               .replace(/-/g, '_')\n               .toLowerCase();\n  }\n\n  function dasherize() {\n    return this.replace(/_/g, '-');\n  }\n\n  function inspect(useDoubleQuotes) {\n    var escapedString = this.replace(/[\\x00-\\x1f\\\\]/g, function(character) {\n      if (character in String.specialChar) {\n        return String.specialChar[character];\n      }\n      return '\\\\u00' + character.charCodeAt().toPaddedString(2, 16);\n    });\n    if (useDoubleQuotes) return '\"' + escapedString.replace(/\"/g, '\\\\\"') + '\"';\n    return \"'\" + escapedString.replace(/'/g, '\\\\\\'') + \"'\";\n  }\n\n  function toJSON() {\n    return this.inspect(true);\n  }\n\n  function unfilterJSON(filter) {\n    return this.replace(filter || Prototype.JSONFilter, '$1');\n  }\n\n  function isJSON() {\n    var str = this;\n    if (str.blank()) return false;\n    str = this.replace(/\\\\./g, '@').replace(/\"[^\"\\\\\\n\\r]*\"/g, '');\n    return (/^[,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t]*$/).test(str);\n  }\n\n  function evalJSON(sanitize) {\n    var json = this.unfilterJSON();\n    try {\n      if (!sanitize || json.isJSON()) return eval('(' + json + ')');\n    } catch (e) { }\n    throw new SyntaxError('Badly formed JSON string: ' + this.inspect());\n  }\n\n  function include(pattern) {\n    return this.indexOf(pattern) > -1;\n  }\n\n  function startsWith(pattern) {\n    return this.indexOf(pattern) === 0;\n  }\n\n  function endsWith(pattern) {\n    var d = this.length - pattern.length;\n    return d >= 0 && this.lastIndexOf(pattern) === d;\n  }\n\n  function empty() {\n    return this == '';\n  }\n\n  function blank() {\n    return /^\\s*$/.test(this);\n  }\n\n  function interpolate(object, pattern) {\n    return new Template(this, pattern).evaluate(object);\n  }\n\n  return {\n    gsub:           gsub,\n    sub:            sub,\n    scan:           scan,\n    truncate:       truncate,\n    strip:          String.prototype.trim ? String.prototype.trim : strip,\n    stripTags:      stripTags,\n    stripScripts:   stripScripts,\n    extractScripts: extractScripts,\n    evalScripts:    evalScripts,\n    escapeHTML:     escapeHTML,\n    unescapeHTML:   unescapeHTML,\n    toQueryParams:  toQueryParams,\n    parseQuery:     toQueryParams,\n    toArray:        toArray,\n    succ:           succ,\n    times:          times,\n    camelize:       camelize,\n    capitalize:     capitalize,\n    underscore:     underscore,\n    dasherize:      dasherize,\n    inspect:        inspect,\n    toJSON:         toJSON,\n    unfilterJSON:   unfilterJSON,\n    isJSON:         isJSON,\n    evalJSON:       evalJSON,\n    include:        include,\n    startsWith:     startsWith,\n    endsWith:       endsWith,\n    empty:          empty,\n    blank:          blank,\n    interpolate:    interpolate\n  };\n})());\n\nvar Template = Class.create({\n  initialize: function(template, pattern) {\n    this.template = template.toString();\n    this.pattern = pattern || Template.Pattern;\n  },\n\n  evaluate: function(object) {\n    if (object && Object.isFunction(object.toTemplateReplacements))\n      object = object.toTemplateReplacements();\n\n    return this.template.gsub(this.pattern, function(match) {\n      if (object == null) return (match[1] + '');\n\n      var before = match[1] || '';\n      if (before == '\\\\') return match[2];\n\n      var ctx = object, expr = match[3];\n      var pattern = /^([^.[]+|\\[((?:.*?[^\\\\])?)\\])(\\.|\\[|$)/;\n      match = pattern.exec(expr);\n      if (match == null) return before;\n\n      while (match != null) {\n        var comp = match[1].startsWith('[') ? match[2].replace(/\\\\\\\\]/g, ']') : match[1];\n        ctx = ctx[comp];\n        if (null == ctx || '' == match[3]) break;\n        expr = expr.substring('[' == match[3] ? match[1].length : match[0].length);\n        match = pattern.exec(expr);\n      }\n\n      return before + String.interpret(ctx);\n    });\n  }\n});\nTemplate.Pattern = /(^|.|\\r|\\n)(#\\{(.*?)\\})/;\n\nvar $break = { };\n\nvar Enumerable = (function() {\n  function each(iterator, context) {\n    var index = 0;\n    try {\n      this._each(function(value) {\n        iterator.call(context, value, index++);\n      });\n    } catch (e) {\n      if (e != $break) throw e;\n    }\n    return this;\n  }\n\n  function eachSlice(number, iterator, context) {\n    var index = -number, slices = [], array = this.toArray();\n    if (number < 1) return array;\n    while ((index += number) < array.length)\n      slices.push(array.slice(index, index+number));\n    return slices.collect(iterator, context);\n  }\n\n  function all(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var result = true;\n    this.each(function(value, index) {\n      result = result && !!iterator.call(context, value, index);\n      if (!result) throw $break;\n    });\n    return result;\n  }\n\n  function any(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var result = false;\n    this.each(function(value, index) {\n      if (result = !!iterator.call(context, value, index))\n        throw $break;\n    });\n    return result;\n  }\n\n  function collect(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var results = [];\n    this.each(function(value, index) {\n      results.push(iterator.call(context, value, index));\n    });\n    return results;\n  }\n\n  function detect(iterator, context) {\n    var result;\n    this.each(function(value, index) {\n      if (iterator.call(context, value, index)) {\n        result = value;\n        throw $break;\n      }\n    });\n    return result;\n  }\n\n  function findAll(iterator, context) {\n    var results = [];\n    this.each(function(value, index) {\n      if (iterator.call(context, value, index))\n        results.push(value);\n    });\n    return results;\n  }\n\n  function grep(filter, iterator, context) {\n    iterator = iterator || Prototype.K;\n    var results = [];\n\n    if (Object.isString(filter))\n      filter = new RegExp(RegExp.escape(filter));\n\n    this.each(function(value, index) {\n      if (filter.match(value))\n        results.push(iterator.call(context, value, index));\n    });\n    return results;\n  }\n\n  function include(object) {\n    if (Object.isFunction(this.indexOf))\n      if (this.indexOf(object) != -1) return true;\n\n    var found = false;\n    this.each(function(value) {\n      if (value == object) {\n        found = true;\n        throw $break;\n      }\n    });\n    return found;\n  }\n\n  function inGroupsOf(number, fillWith) {\n    fillWith = Object.isUndefined(fillWith) ? null : fillWith;\n    return this.eachSlice(number, function(slice) {\n      while(slice.length < number) slice.push(fillWith);\n      return slice;\n    });\n  }\n\n  function inject(memo, iterator, context) {\n    this.each(function(value, index) {\n      memo = iterator.call(context, memo, value, index);\n    });\n    return memo;\n  }\n\n  function invoke(method) {\n    var args = $A(arguments).slice(1);\n    return this.map(function(value) {\n      return value[method].apply(value, args);\n    });\n  }\n\n  function max(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var result;\n    this.each(function(value, index) {\n      value = iterator.call(context, value, index);\n      if (result == null || value >= result)\n        result = value;\n    });\n    return result;\n  }\n\n  function min(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var result;\n    this.each(function(value, index) {\n      value = iterator.call(context, value, index);\n      if (result == null || value < result)\n        result = value;\n    });\n    return result;\n  }\n\n  function partition(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var trues = [], falses = [];\n    this.each(function(value, index) {\n      (iterator.call(context, value, index) ?\n        trues : falses).push(value);\n    });\n    return [trues, falses];\n  }\n\n  function pluck(property) {\n    var results = [];\n    this.each(function(value) {\n      results.push(value[property]);\n    });\n    return results;\n  }\n\n  function reject(iterator, context) {\n    var results = [];\n    this.each(function(value, index) {\n      if (!iterator.call(context, value, index))\n        results.push(value);\n    });\n    return results;\n  }\n\n  function sortBy(iterator, context) {\n    return this.map(function(value, index) {\n      return {\n        value: value,\n        criteria: iterator.call(context, value, index)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria, b = right.criteria;\n      return a < b ? -1 : a > b ? 1 : 0;\n    }).pluck('value');\n  }\n\n  function toArray() {\n    return this.map();\n  }\n\n  function zip() {\n    var iterator = Prototype.K, args = $A(arguments);\n    if (Object.isFunction(args.last()))\n      iterator = args.pop();\n\n    var collections = [this].concat(args).map($A);\n    return this.map(function(value, index) {\n      return iterator(collections.pluck(index));\n    });\n  }\n\n  function size() {\n    return this.toArray().length;\n  }\n\n  function inspect() {\n    return '#<Enumerable:' + this.toArray().inspect() + '>';\n  }\n\n\n\n\n\n\n\n\n\n  return {\n    each:       each,\n    eachSlice:  eachSlice,\n    all:        all,\n    every:      all,\n    any:        any,\n    some:       any,\n    collect:    collect,\n    map:        collect,\n    detect:     detect,\n    findAll:    findAll,\n    select:     findAll,\n    filter:     findAll,\n    grep:       grep,\n    include:    include,\n    member:     include,\n    inGroupsOf: inGroupsOf,\n    inject:     inject,\n    invoke:     invoke,\n    max:        max,\n    min:        min,\n    partition:  partition,\n    pluck:      pluck,\n    reject:     reject,\n    sortBy:     sortBy,\n    toArray:    toArray,\n    entries:    toArray,\n    zip:        zip,\n    size:       size,\n    inspect:    inspect,\n    find:       detect\n  };\n})();\nfunction $A(iterable) {\n  if (!iterable) return [];\n  if ('toArray' in Object(iterable)) return iterable.toArray();\n  var length = iterable.length || 0, results = new Array(length);\n  while (length--) results[length] = iterable[length];\n  return results;\n}\n\nfunction $w(string) {\n  if (!Object.isString(string)) return [];\n  string = string.strip();\n  return string ? string.split(/\\s+/) : [];\n}\n\nArray.from = $A;\n\n\n(function() {\n  var arrayProto = Array.prototype,\n      slice = arrayProto.slice,\n      _each = arrayProto.forEach; // use native browser JS 1.6 implementation if available\n\n  function each(iterator) {\n    for (var i = 0, length = this.length; i < length; i++)\n      iterator(this[i]);\n  }\n  if (!_each) _each = each;\n\n  function clear() {\n    this.length = 0;\n    return this;\n  }\n\n  function first() {\n    return this[0];\n  }\n\n  function last() {\n    return this[this.length - 1];\n  }\n\n  function compact() {\n    return this.select(function(value) {\n      return value != null;\n    });\n  }\n\n  function flatten() {\n    return this.inject([], function(array, value) {\n      if (Object.isArray(value))\n        return array.concat(value.flatten());\n      array.push(value);\n      return array;\n    });\n  }\n\n  function without() {\n    var values = slice.call(arguments, 0);\n    return this.select(function(value) {\n      return !values.include(value);\n    });\n  }\n\n  function reverse(inline) {\n    return (inline !== false ? this : this.toArray())._reverse();\n  }\n\n  function uniq(sorted) {\n    return this.inject([], function(array, value, index) {\n      if (0 == index || (sorted ? array.last() != value : !array.include(value)))\n        array.push(value);\n      return array;\n    });\n  }\n\n  function intersect(array) {\n    return this.uniq().findAll(function(item) {\n      return array.detect(function(value) { return item === value });\n    });\n  }\n\n\n  function clone() {\n    return slice.call(this, 0);\n  }\n\n  function size() {\n    return this.length;\n  }\n\n  function inspect() {\n    return '[' + this.map(Object.inspect).join(', ') + ']';\n  }\n\n  function toJSON() {\n    var results = [];\n    this.each(function(object) {\n      var value = Object.toJSON(object);\n      if (!Object.isUndefined(value)) results.push(value);\n    });\n    return '[' + results.join(', ') + ']';\n  }\n\n  function indexOf(item, i) {\n    i || (i = 0);\n    var length = this.length;\n    if (i < 0) i = length + i;\n    for (; i < length; i++)\n      if (this[i] === item) return i;\n    return -1;\n  }\n\n  function lastIndexOf(item, i) {\n    i = isNaN(i) ? this.length : (i < 0 ? this.length + i : i) + 1;\n    var n = this.slice(0, i).reverse().indexOf(item);\n    return (n < 0) ? n : i - n - 1;\n  }\n\n  function concat() {\n    var array = slice.call(this, 0), item;\n    for (var i = 0, length = arguments.length; i < length; i++) {\n      item = arguments[i];\n      if (Object.isArray(item) && !('callee' in item)) {\n        for (var j = 0, arrayLength = item.length; j < arrayLength; j++)\n          array.push(item[j]);\n      } else {\n        array.push(item);\n      }\n    }\n    return array;\n  }\n\n  Object.extend(arrayProto, Enumerable);\n\n  if (!arrayProto._reverse)\n    arrayProto._reverse = arrayProto.reverse;\n\n  Object.extend(arrayProto, {\n    _each:     _each,\n    clear:     clear,\n    first:     first,\n    last:      last,\n    compact:   compact,\n    flatten:   flatten,\n    without:   without,\n    reverse:   reverse,\n    uniq:      uniq,\n    intersect: intersect,\n    clone:     clone,\n    toArray:   clone,\n    size:      size,\n    inspect:   inspect,\n    toJSON:    toJSON\n  });\n\n  var CONCAT_ARGUMENTS_BUGGY = (function() {\n    return [].concat(arguments)[0][0] !== 1;\n  })(1,2)\n\n  if (CONCAT_ARGUMENTS_BUGGY) arrayProto.concat = concat;\n\n  if (!arrayProto.indexOf) arrayProto.indexOf = indexOf;\n  if (!arrayProto.lastIndexOf) arrayProto.lastIndexOf = lastIndexOf;\n})();\nfunction $H(object) {\n  return new Hash(object);\n};\n\nvar Hash = Class.create(Enumerable, (function() {\n  function initialize(object) {\n    this._object = Object.isHash(object) ? object.toObject() : Object.clone(object);\n  }\n\n  function _each(iterator) {\n    for (var key in this._object) {\n      var value = this._object[key], pair = [key, value];\n      pair.key = key;\n      pair.value = value;\n      iterator(pair);\n    }\n  }\n\n  function set(key, value) {\n    return this._object[key] = value;\n  }\n\n  function get(key) {\n    if (this._object[key] !== Object.prototype[key])\n      return this._object[key];\n  }\n\n  function unset(key) {\n    var value = this._object[key];\n    delete this._object[key];\n    return value;\n  }\n\n  function toObject() {\n    return Object.clone(this._object);\n  }\n\n  function keys() {\n    return this.pluck('key');\n  }\n\n  function values() {\n    return this.pluck('value');\n  }\n\n  function index(value) {\n    var match = this.detect(function(pair) {\n      return pair.value === value;\n    });\n    return match && match.key;\n  }\n\n  function merge(object) {\n    return this.clone().update(object);\n  }\n\n  function update(object) {\n    return new Hash(object).inject(this, function(result, pair) {\n      result.set(pair.key, pair.value);\n      return result;\n    });\n  }\n\n  function toQueryPair(key, value) {\n    if (Object.isUndefined(value)) return key;\n    return key + '=' + encodeURIComponent(String.interpret(value));\n  }\n\n  function toQueryString() {\n    return this.inject([], function(results, pair) {\n      var key = encodeURIComponent(pair.key), values = pair.value;\n\n      if (values && typeof values == 'object') {\n        if (Object.isArray(values))\n          return results.concat(values.map(toQueryPair.curry(key)));\n      } else results.push(toQueryPair(key, values));\n      return results;\n    }).join('&');\n  }\n\n  function inspect() {\n    return '#<Hash:{' + this.map(function(pair) {\n      return pair.map(Object.inspect).join(': ');\n    }).join(', ') + '}>';\n  }\n\n  function toJSON() {\n    return Object.toJSON(this.toObject());\n  }\n\n  function clone() {\n    return new Hash(this);\n  }\n\n  return {\n    initialize:             initialize,\n    _each:                  _each,\n    set:                    set,\n    get:                    get,\n    unset:                  unset,\n    toObject:               toObject,\n    toTemplateReplacements: toObject,\n    keys:                   keys,\n    values:                 values,\n    index:                  index,\n    merge:                  merge,\n    update:                 update,\n    toQueryString:          toQueryString,\n    inspect:                inspect,\n    toJSON:                 toJSON,\n    clone:                  clone\n  };\n})());\n\nHash.from = $H;\nObject.extend(Number.prototype, (function() {\n  function toColorPart() {\n    return this.toPaddedString(2, 16);\n  }\n\n  function succ() {\n    return this + 1;\n  }\n\n  function times(iterator, context) {\n    $R(0, this, true).each(iterator, context);\n    return this;\n  }\n\n  function toPaddedString(length, radix) {\n    var string = this.toString(radix || 10);\n    return '0'.times(length - string.length) + string;\n  }\n\n  function toJSON() {\n    return isFinite(this) ? this.toString() : 'null';\n  }\n\n  function abs() {\n    return Math.abs(this);\n  }\n\n  function round() {\n    return Math.round(this);\n  }\n\n  function ceil() {\n    return Math.ceil(this);\n  }\n\n  function floor() {\n    return Math.floor(this);\n  }\n\n  return {\n    toColorPart:    toColorPart,\n    succ:           succ,\n    times:          times,\n    toPaddedString: toPaddedString,\n    toJSON:         toJSON,\n    abs:            abs,\n    round:          round,\n    ceil:           ceil,\n    floor:          floor\n  };\n})());\n\nfunction $R(start, end, exclusive) {\n  return new ObjectRange(start, end, exclusive);\n}\n\nvar ObjectRange = Class.create(Enumerable, (function() {\n  function initialize(start, end, exclusive) {\n    this.start = start;\n    this.end = end;\n    this.exclusive = exclusive;\n  }\n\n  function _each(iterator) {\n    var value = this.start;\n    while (this.include(value)) {\n      iterator(value);\n      value = value.succ();\n    }\n  }\n\n  function include(value) {\n    if (value < this.start)\n      return false;\n    if (this.exclusive)\n      return value < this.end;\n    return value <= this.end;\n  }\n\n  return {\n    initialize: initialize,\n    _each:      _each,\n    include:    include\n  };\n})());\n\n\n\nvar Ajax = {\n  getTransport: function() {\n    return Try.these(\n      function() {return new XMLHttpRequest()},\n      function() {return new ActiveXObject('Msxml2.XMLHTTP')},\n      function() {return new ActiveXObject('Microsoft.XMLHTTP')}\n    ) || false;\n  },\n\n  activeRequestCount: 0\n};\n\nAjax.Responders = {\n  responders: [],\n\n  _each: function(iterator) {\n    this.responders._each(iterator);\n  },\n\n  register: function(responder) {\n    if (!this.include(responder))\n      this.responders.push(responder);\n  },\n\n  unregister: function(responder) {\n    this.responders = this.responders.without(responder);\n  },\n\n  dispatch: function(callback, request, transport, json) {\n    this.each(function(responder) {\n      if (Object.isFunction(responder[callback])) {\n        try {\n          responder[callback].apply(responder, [request, transport, json]);\n        } catch (e) { }\n      }\n    });\n  }\n};\n\nObject.extend(Ajax.Responders, Enumerable);\n\nAjax.Responders.register({\n  onCreate:   function() { Ajax.activeRequestCount++ },\n  onComplete: function() { Ajax.activeRequestCount-- }\n});\nAjax.Base = Class.create({\n  initialize: function(options) {\n    this.options = {\n      method:       'post',\n      asynchronous: true,\n      contentType:  'application/x-www-form-urlencoded',\n      encoding:     'UTF-8',\n      parameters:   '',\n      evalJSON:     true,\n      evalJS:       true\n    };\n    Object.extend(this.options, options || { });\n\n    this.options.method = this.options.method.toLowerCase();\n\n    if (Object.isString(this.options.parameters))\n      this.options.parameters = this.options.parameters.toQueryParams();\n    else if (Object.isHash(this.options.parameters))\n      this.options.parameters = this.options.parameters.toObject();\n  }\n});\nAjax.Request = Class.create(Ajax.Base, {\n  _complete: false,\n\n  initialize: function($super, url, options) {\n    $super(options);\n    this.transport = Ajax.getTransport();\n    this.request(url);\n  },\n\n  request: function(url) {\n    this.url = url;\n    this.method = this.options.method;\n    var params = Object.clone(this.options.parameters);\n\n    if (!['get', 'post'].include(this.method)) {\n      params['_method'] = this.method;\n      this.method = 'post';\n    }\n\n    this.parameters = params;\n\n    if (params = Object.toQueryString(params)) {\n      if (this.method == 'get')\n        this.url += (this.url.include('?') ? '&' : '?') + params;\n      else if (/Konqueror|Safari|KHTML/.test(navigator.userAgent))\n        params += '&_=';\n    }\n\n    try {\n      var response = new Ajax.Response(this);\n      if (this.options.onCreate) this.options.onCreate(response);\n      Ajax.Responders.dispatch('onCreate', this, response);\n\n      this.transport.open(this.method.toUpperCase(), this.url,\n        this.options.asynchronous);\n\n      if (this.options.asynchronous) this.respondToReadyState.bind(this).defer(1);\n\n      this.transport.onreadystatechange = this.onStateChange.bind(this);\n      this.setRequestHeaders();\n\n      this.body = this.method == 'post' ? (this.options.postBody || params) : null;\n      this.transport.send(this.body);\n\n      /* Force Firefox to handle ready state 4 for synchronous requests */\n      if (!this.options.asynchronous && this.transport.overrideMimeType)\n        this.onStateChange();\n\n    }\n    catch (e) {\n      this.dispatchException(e);\n    }\n  },\n\n  onStateChange: function() {\n    var readyState = this.transport.readyState;\n    if (readyState > 1 && !((readyState == 4) && this._complete))\n      this.respondToReadyState(this.transport.readyState);\n  },\n\n  setRequestHeaders: function() {\n    var headers = {\n      'X-Requested-With': 'XMLHttpRequest',\n      'X-Prototype-Version': Prototype.Version,\n      'Accept': 'text/javascript, text/html, application/xml, text/xml, */*'\n    };\n\n    if (this.method == 'post') {\n      headers['Content-type'] = this.options.contentType +\n        (this.options.encoding ? '; charset=' + this.options.encoding : '');\n\n      /* Force \"Connection: close\" for older Mozilla browsers to work\n       * around a bug where XMLHttpRequest sends an incorrect\n       * Content-length header. See Mozilla Bugzilla #246651.\n       */\n      if (this.transport.overrideMimeType &&\n          (navigator.userAgent.match(/Gecko\\/(\\d{4})/) || [0,2005])[1] < 2005)\n            headers['Connection'] = 'close';\n    }\n\n    if (typeof this.options.requestHeaders == 'object') {\n      var extras = this.options.requestHeaders;\n\n      if (Object.isFunction(extras.push))\n        for (var i = 0, length = extras.length; i < length; i += 2)\n          headers[extras[i]] = extras[i+1];\n      else\n        $H(extras).each(function(pair) { headers[pair.key] = pair.value });\n    }\n\n    for (var name in headers)\n      this.transport.setRequestHeader(name, headers[name]);\n  },\n\n  success: function() {\n    var status = this.getStatus();\n    return !status || (status >= 200 && status < 300);\n  },\n\n  getStatus: function() {\n    try {\n      return this.transport.status || 0;\n    } catch (e) { return 0 }\n  },\n\n  respondToReadyState: function(readyState) {\n    var state = Ajax.Request.Events[readyState], response = new Ajax.Response(this);\n\n    if (state == 'Complete') {\n      try {\n        this._complete = true;\n        (this.options['on' + response.status]\n         || this.options['on' + (this.success() ? 'Success' : 'Failure')]\n         || Prototype.emptyFunction)(response, response.headerJSON);\n      } catch (e) {\n        this.dispatchException(e);\n      }\n\n      var contentType = response.getHeader('Content-type');\n      if (this.options.evalJS == 'force'\n          || (this.options.evalJS && this.isSameOrigin() && contentType\n          && contentType.match(/^\\s*(text|application)\\/(x-)?(java|ecma)script(;.*)?\\s*$/i)))\n        this.evalResponse();\n    }\n\n    try {\n      (this.options['on' + state] || Prototype.emptyFunction)(response, response.headerJSON);\n      Ajax.Responders.dispatch('on' + state, this, response, response.headerJSON);\n    } catch (e) {\n      this.dispatchException(e);\n    }\n\n    if (state == 'Complete') {\n      this.transport.onreadystatechange = Prototype.emptyFunction;\n    }\n  },\n\n  isSameOrigin: function() {\n    var m = this.url.match(/^\\s*https?:\\/\\/[^\\/]*/);\n    return !m || (m[0] == '#{protocol}//#{domain}#{port}'.interpolate({\n      protocol: location.protocol,\n      domain: document.domain,\n      port: location.port ? ':' + location.port : ''\n    }));\n  },\n\n  getHeader: function(name) {\n    try {\n      return this.transport.getResponseHeader(name) || null;\n    } catch (e) { return null; }\n  },\n\n  evalResponse: function() {\n    try {\n      return eval((this.transport.responseText || '').unfilterJSON());\n    } catch (e) {\n      this.dispatchException(e);\n    }\n  },\n\n  dispatchException: function(exception) {\n    (this.options.onException || Prototype.emptyFunction)(this, exception);\n    Ajax.Responders.dispatch('onException', this, exception);\n  }\n});\n\nAjax.Request.Events =\n  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];\n\n\n\n\n\n\n\n\nAjax.Response = Class.create({\n  initialize: function(request){\n    this.request = request;\n    var transport  = this.transport  = request.transport,\n        readyState = this.readyState = transport.readyState;\n\n    if((readyState > 2 && !Prototype.Browser.IE) || readyState == 4) {\n      this.status       = this.getStatus();\n      this.statusText   = this.getStatusText();\n      this.responseText = String.interpret(transport.responseText);\n      this.headerJSON   = this._getHeaderJSON();\n    }\n\n    if(readyState == 4) {\n      var xml = transport.responseXML;\n      this.responseXML  = Object.isUndefined(xml) ? null : xml;\n      this.responseJSON = this._getResponseJSON();\n    }\n  },\n\n  status:      0,\n\n  statusText: '',\n\n  getStatus: Ajax.Request.prototype.getStatus,\n\n  getStatusText: function() {\n    try {\n      return this.transport.statusText || '';\n    } catch (e) { return '' }\n  },\n\n  getHeader: Ajax.Request.prototype.getHeader,\n\n  getAllHeaders: function() {\n    try {\n      return this.getAllResponseHeaders();\n    } catch (e) { return null }\n  },\n\n  getResponseHeader: function(name) {\n    return this.transport.getResponseHeader(name);\n  },\n\n  getAllResponseHeaders: function() {\n    return this.transport.getAllResponseHeaders();\n  },\n\n  _getHeaderJSON: function() {\n    var json = this.getHeader('X-JSON');\n    if (!json) return null;\n    json = decodeURIComponent(escape(json));\n    try {\n      return json.evalJSON(this.request.options.sanitizeJSON ||\n        !this.request.isSameOrigin());\n    } catch (e) {\n      this.request.dispatchException(e);\n    }\n  },\n\n  _getResponseJSON: function() {\n    var options = this.request.options;\n    if (!options.evalJSON || (options.evalJSON != 'force' &&\n      !(this.getHeader('Content-type') || '').include('application/json')) ||\n        this.responseText.blank())\n          return null;\n    try {\n      return this.responseText.evalJSON(options.sanitizeJSON ||\n        !this.request.isSameOrigin());\n    } catch (e) {\n      this.request.dispatchException(e);\n    }\n  }\n});\n\nAjax.Updater = Class.create(Ajax.Request, {\n  initialize: function($super, container, url, options) {\n    this.container = {\n      success: (container.success || container),\n      failure: (container.failure || (container.success ? null : container))\n    };\n\n    options = Object.clone(options);\n    var onComplete = options.onComplete;\n    options.onComplete = (function(response, json) {\n      this.updateContent(response.responseText);\n      if (Object.isFunction(onComplete)) onComplete(response, json);\n    }).bind(this);\n\n    $super(url, options);\n  },\n\n  updateContent: function(responseText) {\n    var receiver = this.container[this.success() ? 'success' : 'failure'],\n        options = this.options;\n\n    if (!options.evalScripts) responseText = responseText.stripScripts();\n\n    if (receiver = $(receiver)) {\n      if (options.insertion) {\n        if (Object.isString(options.insertion)) {\n          var insertion = { }; insertion[options.insertion] = responseText;\n          receiver.insert(insertion);\n        }\n        else options.insertion(receiver, responseText);\n      }\n      else receiver.update(responseText);\n    }\n  }\n});\n\nAjax.PeriodicalUpdater = Class.create(Ajax.Base, {\n  initialize: function($super, container, url, options) {\n    $super(options);\n    this.onComplete = this.options.onComplete;\n\n    this.frequency = (this.options.frequency || 2);\n    this.decay = (this.options.decay || 1);\n\n    this.updater = { };\n    this.container = container;\n    this.url = url;\n\n    this.start();\n  },\n\n  start: function() {\n    this.options.onComplete = this.updateComplete.bind(this);\n    this.onTimerEvent();\n  },\n\n  stop: function() {\n    this.updater.options.onComplete = undefined;\n    clearTimeout(this.timer);\n    (this.onComplete || Prototype.emptyFunction).apply(this, arguments);\n  },\n\n  updateComplete: function(response) {\n    if (this.options.decay) {\n      this.decay = (response.responseText == this.lastText ?\n        this.decay * this.options.decay : 1);\n\n      this.lastText = response.responseText;\n    }\n    this.timer = this.onTimerEvent.bind(this).delay(this.decay * this.frequency);\n  },\n\n  onTimerEvent: function() {\n    this.updater = new Ajax.Updater(this.container, this.url, this.options);\n  }\n});\n\n\n\nfunction $(element) {\n  if (arguments.length > 1) {\n    for (var i = 0, elements = [], length = arguments.length; i < length; i++)\n      elements.push($(arguments[i]));\n    return elements;\n  }\n  if (Object.isString(element))\n    element = document.getElementById(element);\n  return Element.extend(element);\n}\n\nif (Prototype.BrowserFeatures.XPath) {\n  document._getElementsByXPath = function(expression, parentElement) {\n    var results = [];\n    var query = document.evaluate(expression, $(parentElement) || document,\n      null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n    for (var i = 0, length = query.snapshotLength; i < length; i++)\n      results.push(Element.extend(query.snapshotItem(i)));\n    return results;\n  };\n}\n\n/*--------------------------------------------------------------------------*/\n\nif (!window.Node) var Node = { };\n\nif (!Node.ELEMENT_NODE) {\n  Object.extend(Node, {\n    ELEMENT_NODE: 1,\n    ATTRIBUTE_NODE: 2,\n    TEXT_NODE: 3,\n    CDATA_SECTION_NODE: 4,\n    ENTITY_REFERENCE_NODE: 5,\n    ENTITY_NODE: 6,\n    PROCESSING_INSTRUCTION_NODE: 7,\n    COMMENT_NODE: 8,\n    DOCUMENT_NODE: 9,\n    DOCUMENT_TYPE_NODE: 10,\n    DOCUMENT_FRAGMENT_NODE: 11,\n    NOTATION_NODE: 12\n  });\n}\n\n\n(function(global) {\n\n  var SETATTRIBUTE_IGNORES_NAME = (function(){\n    var elForm = document.createElement(\"form\");\n    var elInput = document.createElement(\"input\");\n    var root = document.documentElement;\n    elInput.setAttribute(\"name\", \"test\");\n    elForm.appendChild(elInput);\n    root.appendChild(elForm);\n    var isBuggy = elForm.elements\n      ? (typeof elForm.elements.test == \"undefined\")\n      : null;\n    root.removeChild(elForm);\n    elForm = elInput = null;\n    return isBuggy;\n  })();\n\n  var element = global.Element;\n  global.Element = function(tagName, attributes) {\n    attributes = attributes || { };\n    tagName = tagName.toLowerCase();\n    var cache = Element.cache;\n    if (SETATTRIBUTE_IGNORES_NAME && attributes.name) {\n      tagName = '<' + tagName + ' name=\"' + attributes.name + '\">';\n      delete attributes.name;\n      return Element.writeAttribute(document.createElement(tagName), attributes);\n    }\n    if (!cache[tagName]) cache[tagName] = Element.extend(document.createElement(tagName));\n    return Element.writeAttribute(cache[tagName].cloneNode(false), attributes);\n  };\n  Object.extend(global.Element, element || { });\n  if (element) global.Element.prototype = element.prototype;\n})(this);\n\nElement.cache = { };\nElement.idCounter = 1;\n\nElement.Methods = {\n  visible: function(element) {\n    return $(element).style.display != 'none';\n  },\n\n  toggle: function(element) {\n    element = $(element);\n    Element[Element.visible(element) ? 'hide' : 'show'](element);\n    return element;\n  },\n\n\n  hide: function(element) {\n    element = $(element);\n    element.style.display = 'none';\n    return element;\n  },\n\n  show: function(element) {\n    element = $(element);\n    element.style.display = '';\n    return element;\n  },\n\n  remove: function(element) {\n    element = $(element);\n    element.parentNode.removeChild(element);\n    return element;\n  },\n\n  update: (function(){\n\n    var SELECT_ELEMENT_INNERHTML_BUGGY = (function(){\n      var el = document.createElement(\"select\"),\n          isBuggy = true;\n      el.innerHTML = \"<option value=\\\"test\\\">test</option>\";\n      if (el.options && el.options[0]) {\n        isBuggy = el.options[0].nodeName.toUpperCase() !== \"OPTION\";\n      }\n      el = null;\n      return isBuggy;\n    })();\n\n    var TABLE_ELEMENT_INNERHTML_BUGGY = (function(){\n      try {\n        var el = document.createElement(\"table\");\n        if (el && el.tBodies) {\n          el.innerHTML = \"<tbody><tr><td>test</td></tr></tbody>\";\n          var isBuggy = typeof el.tBodies[0] == \"undefined\";\n          el = null;\n          return isBuggy;\n        }\n      } catch (e) {\n        return true;\n      }\n    })();\n\n    var SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING = (function () {\n      var s = document.createElement(\"script\"),\n          isBuggy = false;\n      try {\n        s.appendChild(document.createTextNode(\"\"));\n        isBuggy = !s.firstChild ||\n          s.firstChild && s.firstChild.nodeType !== 3;\n      } catch (e) {\n        isBuggy = true;\n      }\n      s = null;\n      return isBuggy;\n    })();\n\n    function update(element, content) {\n      element = $(element);\n\n      if (content && content.toElement)\n        content = content.toElement();\n\n      if (Object.isElement(content))\n        return element.update().insert(content);\n\n      content = Object.toHTML(content);\n\n      var tagName = element.tagName.toUpperCase();\n\n      if (tagName === 'SCRIPT' && SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING) {\n        element.text = content;\n        return element;\n      }\n\n      if (SELECT_ELEMENT_INNERHTML_BUGGY || TABLE_ELEMENT_INNERHTML_BUGGY) {\n        if (tagName in Element._insertionTranslations.tags) {\n          while (element.firstChild) {\n            element.removeChild(element.firstChild);\n          }\n          Element._getContentFromAnonymousElement(tagName, content.stripScripts())\n            .each(function(node) {\n              element.appendChild(node)\n            });\n        }\n        else {\n          element.innerHTML = content.stripScripts();\n        }\n      }\n      else {\n        element.innerHTML = content.stripScripts();\n      }\n\n      content.evalScripts.bind(content).defer();\n      return element;\n    }\n\n    return update;\n  })(),\n\n  replace: function(element, content) {\n    element = $(element);\n    if (content && content.toElement) content = content.toElement();\n    else if (!Object.isElement(content)) {\n      content = Object.toHTML(content);\n      var range = element.ownerDocument.createRange();\n      range.selectNode(element);\n      content.evalScripts.bind(content).defer();\n      content = range.createContextualFragment(content.stripScripts());\n    }\n    element.parentNode.replaceChild(content, element);\n    return element;\n  },\n\n  insert: function(element, insertions) {\n    element = $(element);\n\n    if (Object.isString(insertions) || Object.isNumber(insertions) ||\n        Object.isElement(insertions) || (insertions && (insertions.toElement || insertions.toHTML)))\n          insertions = {bottom:insertions};\n\n    var content, insert, tagName, childNodes;\n\n    for (var position in insertions) {\n      content  = insertions[position];\n      position = position.toLowerCase();\n      insert = Element._insertionTranslations[position];\n\n      if (content && content.toElement) content = content.toElement();\n      if (Object.isElement(content)) {\n        insert(element, content);\n        continue;\n      }\n\n      content = Object.toHTML(content);\n\n      tagName = ((position == 'before' || position == 'after')\n        ? element.parentNode : element).tagName.toUpperCase();\n\n      childNodes = Element._getContentFromAnonymousElement(tagName, content.stripScripts());\n\n      if (position == 'top' || position == 'after') childNodes.reverse();\n      childNodes.each(insert.curry(element));\n\n      content.evalScripts.bind(content).defer();\n    }\n\n    return element;\n  },\n\n  wrap: function(element, wrapper, attributes) {\n    element = $(element);\n    if (Object.isElement(wrapper))\n      $(wrapper).writeAttribute(attributes || { });\n    else if (Object.isString(wrapper)) wrapper = new Element(wrapper, attributes);\n    else wrapper = new Element('div', wrapper);\n    if (element.parentNode)\n      element.parentNode.replaceChild(wrapper, element);\n    wrapper.appendChild(element);\n    return wrapper;\n  },\n\n  inspect: function(element) {\n    element = $(element);\n    var result = '<' + element.tagName.toLowerCase();\n    $H({'id': 'id', 'className': 'class'}).each(function(pair) {\n      var property = pair.first(), attribute = pair.last();\n      var value = (element[property] || '').toString();\n      if (value) result += ' ' + attribute + '=' + value.inspect(true);\n    });\n    return result + '>';\n  },\n\n  recursivelyCollect: function(element, property) {\n    element = $(element);\n    var elements = [];\n    while (element = element[property])\n      if (element.nodeType == 1)\n        elements.push(Element.extend(element));\n    return elements;\n  },\n\n  ancestors: function(element) {\n    return Element.recursivelyCollect(element, 'parentNode');\n  },\n\n  descendants: function(element) {\n    return Element.select(element, \"*\");\n  },\n\n  firstDescendant: function(element) {\n    element = $(element).firstChild;\n    while (element && element.nodeType != 1) element = element.nextSibling;\n    return $(element);\n  },\n\n  immediateDescendants: function(element) {\n    if (!(element = $(element).firstChild)) return [];\n    while (element && element.nodeType != 1) element = element.nextSibling;\n    if (element) return [element].concat($(element).nextSiblings());\n    return [];\n  },\n\n  previousSiblings: function(element) {\n    return Element.recursivelyCollect(element, 'previousSibling');\n  },\n\n  nextSiblings: function(element) {\n    return Element.recursivelyCollect(element, 'nextSibling');\n  },\n\n  siblings: function(element) {\n    element = $(element);\n    return Element.previousSiblings(element).reverse()\n      .concat(Element.nextSiblings(element));\n  },\n\n  match: function(element, selector) {\n    if (Object.isString(selector))\n      selector = new Selector(selector);\n    return selector.match($(element));\n  },\n\n  up: function(element, expression, index) {\n    element = $(element);\n    if (arguments.length == 1) return $(element.parentNode);\n    var ancestors = Element.ancestors(element);\n    return Object.isNumber(expression) ? ancestors[expression] :\n      Selector.findElement(ancestors, expression, index);\n  },\n\n  down: function(element, expression, index) {\n    element = $(element);\n    if (arguments.length == 1) return Element.firstDescendant(element);\n    return Object.isNumber(expression) ? Element.descendants(element)[expression] :\n      Element.select(element, expression)[index || 0];\n  },\n\n  previous: function(element, expression, index) {\n    element = $(element);\n    if (arguments.length == 1) return $(Selector.handlers.previousElementSibling(element));\n    var previousSiblings = Element.previousSiblings(element);\n    return Object.isNumber(expression) ? previousSiblings[expression] :\n      Selector.findElement(previousSiblings, expression, index);\n  },\n\n  next: function(element, expression, index) {\n    element = $(element);\n    if (arguments.length == 1) return $(Selector.handlers.nextElementSibling(element));\n    var nextSiblings = Element.nextSiblings(element);\n    return Object.isNumber(expression) ? nextSiblings[expression] :\n      Selector.findElement(nextSiblings, expression, index);\n  },\n\n\n  select: function(element) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return Selector.findChildElements(element, args);\n  },\n\n  adjacent: function(element) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return Selector.findChildElements(element.parentNode, args).without(element);\n  },\n\n  identify: function(element) {\n    element = $(element);\n    var id = Element.readAttribute(element, 'id');\n    if (id) return id;\n    do { id = 'anonymous_element_' + Element.idCounter++ } while ($(id));\n    Element.writeAttribute(element, 'id', id);\n    return id;\n  },\n\n  readAttribute: function(element, name) {\n    element = $(element);\n    if (Prototype.Browser.IE) {\n      var t = Element._attributeTranslations.read;\n      if (t.values[name]) return t.values[name](element, name);\n      if (t.names[name]) name = t.names[name];\n      if (name.include(':')) {\n        return (!element.attributes || !element.attributes[name]) ? null :\n         element.attributes[name].value;\n      }\n    }\n    return element.getAttribute(name);\n  },\n\n  writeAttribute: function(element, name, value) {\n    element = $(element);\n    var attributes = { }, t = Element._attributeTranslations.write;\n\n    if (typeof name == 'object') attributes = name;\n    else attributes[name] = Object.isUndefined(value) ? true : value;\n\n    for (var attr in attributes) {\n      name = t.names[attr] || attr;\n      value = attributes[attr];\n      if (t.values[attr]) name = t.values[attr](element, value);\n      if (value === false || value === null)\n        element.removeAttribute(name);\n      else if (value === true)\n        element.setAttribute(name, name);\n      else element.setAttribute(name, value);\n    }\n    return element;\n  },\n\n  getHeight: function(element) {\n    return Element.getDimensions(element).height;\n  },\n\n  getWidth: function(element) {\n    return Element.getDimensions(element).width;\n  },\n\n  classNames: function(element) {\n    return new Element.ClassNames(element);\n  },\n\n  hasClassName: function(element, className) {\n    if (!(element = $(element))) return;\n    var elementClassName = element.className;\n    return (elementClassName.length > 0 && (elementClassName == className ||\n      new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(elementClassName)));\n  },\n\n  addClassName: function(element, className) {\n    if (!(element = $(element))) return;\n    if (!Element.hasClassName(element, className))\n      element.className += (element.className ? ' ' : '') + className;\n    return element;\n  },\n\n  removeClassName: function(element, className) {\n    if (!(element = $(element))) return;\n    element.className = element.className.replace(\n      new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), ' ').strip();\n    return element;\n  },\n\n  toggleClassName: function(element, className) {\n    if (!(element = $(element))) return;\n    return Element[Element.hasClassName(element, className) ?\n      'removeClassName' : 'addClassName'](element, className);\n  },\n\n  cleanWhitespace: function(element) {\n    element = $(element);\n    var node = element.firstChild;\n    while (node) {\n      var nextNode = node.nextSibling;\n      if (node.nodeType == 3 && !/\\S/.test(node.nodeValue))\n        element.removeChild(node);\n      node = nextNode;\n    }\n    return element;\n  },\n\n  empty: function(element) {\n    return $(element).innerHTML.blank();\n  },\n\n  descendantOf: function(element, ancestor) {\n    element = $(element), ancestor = $(ancestor);\n\n    if (element.compareDocumentPosition)\n      return (element.compareDocumentPosition(ancestor) & 8) === 8;\n\n    if (ancestor.contains)\n      return ancestor.contains(element) && ancestor !== element;\n\n    while (element = element.parentNode)\n      if (element == ancestor) return true;\n\n    return false;\n  },\n\n  scrollTo: function(element) {\n    element = $(element);\n    var pos = Element.cumulativeOffset(element);\n    window.scrollTo(pos[0], pos[1]);\n    return element;\n  },\n\n  getStyle: function(element, style) {\n    element = $(element);\n    style = style == 'float' ? 'cssFloat' : style.camelize();\n    var value = element.style[style];\n    if (!value || value == 'auto') {\n      var css = document.defaultView.getComputedStyle(element, null);\n      value = css ? css[style] : null;\n    }\n    if (style == 'opacity') return value ? parseFloat(value) : 1.0;\n    return value == 'auto' ? null : value;\n  },\n\n  getOpacity: function(element) {\n    return $(element).getStyle('opacity');\n  },\n\n  setStyle: function(element, styles) {\n    element = $(element);\n    var elementStyle = element.style, match;\n    if (Object.isString(styles)) {\n      element.style.cssText += ';' + styles;\n      return styles.include('opacity') ?\n        element.setOpacity(styles.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1]) : element;\n    }\n    for (var property in styles)\n      if (property == 'opacity') element.setOpacity(styles[property]);\n      else\n        elementStyle[(property == 'float' || property == 'cssFloat') ?\n          (Object.isUndefined(elementStyle.styleFloat) ? 'cssFloat' : 'styleFloat') :\n            property] = styles[property];\n\n    return element;\n  },\n\n  setOpacity: function(element, value) {\n    element = $(element);\n    element.style.opacity = (value == 1 || value === '') ? '' :\n      (value < 0.00001) ? 0 : value;\n    return element;\n  },\n\n  getDimensions: function(element) {\n    element = $(element);\n    var display = Element.getStyle(element, 'display');\n    if (display != 'none' && display != null) // Safari bug\n      return {width: element.offsetWidth, height: element.offsetHeight};\n\n    var els = element.style;\n    var originalVisibility = els.visibility;\n    var originalPosition = els.position;\n    var originalDisplay = els.display;\n    els.visibility = 'hidden';\n    if (originalPosition != 'fixed') // Switching fixed to absolute causes issues in Safari\n      els.position = 'absolute';\n    els.display = 'block';\n    var originalWidth = element.clientWidth;\n    var originalHeight = element.clientHeight;\n    els.display = originalDisplay;\n    els.position = originalPosition;\n    els.visibility = originalVisibility;\n    return {width: originalWidth, height: originalHeight};\n  },\n\n  makePositioned: function(element) {\n    element = $(element);\n    var pos = Element.getStyle(element, 'position');\n    if (pos == 'static' || !pos) {\n      element._madePositioned = true;\n      element.style.position = 'relative';\n      if (Prototype.Browser.Opera) {\n        element.style.top = 0;\n        element.style.left = 0;\n      }\n    }\n    return element;\n  },\n\n  undoPositioned: function(element) {\n    element = $(element);\n    if (element._madePositioned) {\n      element._madePositioned = undefined;\n      element.style.position =\n        element.style.top =\n        element.style.left =\n        element.style.bottom =\n        element.style.right = '';\n    }\n    return element;\n  },\n\n  makeClipping: function(element) {\n    element = $(element);\n    if (element._overflow) return element;\n    element._overflow = Element.getStyle(element, 'overflow') || 'auto';\n    if (element._overflow !== 'hidden')\n      element.style.overflow = 'hidden';\n    return element;\n  },\n\n  undoClipping: function(element) {\n    element = $(element);\n    if (!element._overflow) return element;\n    element.style.overflow = element._overflow == 'auto' ? '' : element._overflow;\n    element._overflow = null;\n    return element;\n  },\n\n  cumulativeOffset: function(element) {\n    var valueT = 0, valueL = 0;\n    do {\n      valueT += element.offsetTop  || 0;\n      valueL += element.offsetLeft || 0;\n      element = element.offsetParent;\n    } while (element);\n    return Element._returnOffset(valueL, valueT);\n  },\n\n  positionedOffset: function(element) {\n    var valueT = 0, valueL = 0;\n    do {\n      valueT += element.offsetTop  || 0;\n      valueL += element.offsetLeft || 0;\n      element = element.offsetParent;\n      if (element) {\n        if (element.tagName.toUpperCase() == 'BODY') break;\n        var p = Element.getStyle(element, 'position');\n        if (p !== 'static') break;\n      }\n    } while (element);\n    return Element._returnOffset(valueL, valueT);\n  },\n\n  absolutize: function(element) {\n    element = $(element);\n    if (Element.getStyle(element, 'position') == 'absolute') return element;\n\n    var offsets = Element.positionedOffset(element);\n    var top     = offsets[1];\n    var left    = offsets[0];\n    var width   = element.clientWidth;\n    var height  = element.clientHeight;\n\n    element._originalLeft   = left - parseFloat(element.style.left  || 0);\n    element._originalTop    = top  - parseFloat(element.style.top || 0);\n    element._originalWidth  = element.style.width;\n    element._originalHeight = element.style.height;\n\n    element.style.position = 'absolute';\n    element.style.top    = top + 'px';\n    element.style.left   = left + 'px';\n    element.style.width  = width + 'px';\n    element.style.height = height + 'px';\n    return element;\n  },\n\n  relativize: function(element) {\n    element = $(element);\n    if (Element.getStyle(element, 'position') == 'relative') return element;\n\n    element.style.position = 'relative';\n    var top  = parseFloat(element.style.top  || 0) - (element._originalTop || 0);\n    var left = parseFloat(element.style.left || 0) - (element._originalLeft || 0);\n\n    element.style.top    = top + 'px';\n    element.style.left   = left + 'px';\n    element.style.height = element._originalHeight;\n    element.style.width  = element._originalWidth;\n    return element;\n  },\n\n  cumulativeScrollOffset: function(element) {\n    var valueT = 0, valueL = 0;\n    do {\n      valueT += element.scrollTop  || 0;\n      valueL += element.scrollLeft || 0;\n      element = element.parentNode;\n    } while (element);\n    return Element._returnOffset(valueL, valueT);\n  },\n\n  getOffsetParent: function(element) {\n    if (element.offsetParent) return $(element.offsetParent);\n    if (element == document.body) return $(element);\n\n    while ((element = element.parentNode) && element != document.body)\n      if (Element.getStyle(element, 'position') != 'static')\n        return $(element);\n\n    return $(document.body);\n  },\n\n  viewportOffset: function(forElement) {\n    var valueT = 0, valueL = 0;\n\n    var element = forElement;\n    do {\n      valueT += element.offsetTop  || 0;\n      valueL += element.offsetLeft || 0;\n\n      if (element.offsetParent == document.body &&\n        Element.getStyle(element, 'position') == 'absolute') break;\n\n    } while (element = element.offsetParent);\n\n    element = forElement;\n    do {\n      if (!Prototype.Browser.Opera || (element.tagName && (element.tagName.toUpperCase() == 'BODY'))) {\n        valueT -= element.scrollTop  || 0;\n        valueL -= element.scrollLeft || 0;\n      }\n    } while (element = element.parentNode);\n\n    return Element._returnOffset(valueL, valueT);\n  },\n\n  clonePosition: function(element, source) {\n    var options = Object.extend({\n      setLeft:    true,\n      setTop:     true,\n      setWidth:   true,\n      setHeight:  true,\n      offsetTop:  0,\n      offsetLeft: 0\n    }, arguments[2] || { });\n\n    source = $(source);\n    var p = Element.viewportOffset(source);\n\n    element = $(element);\n    var delta = [0, 0];\n    var parent = null;\n    if (Element.getStyle(element, 'position') == 'absolute') {\n      parent = Element.getOffsetParent(element);\n      delta = Element.viewportOffset(parent);\n    }\n\n    if (parent == document.body) {\n      delta[0] -= document.body.offsetLeft;\n      delta[1] -= document.body.offsetTop;\n    }\n\n    if (options.setLeft)   element.style.left  = (p[0] - delta[0] + options.offsetLeft) + 'px';\n    if (options.setTop)    element.style.top   = (p[1] - delta[1] + options.offsetTop) + 'px';\n    if (options.setWidth)  element.style.width = source.offsetWidth + 'px';\n    if (options.setHeight) element.style.height = source.offsetHeight + 'px';\n    return element;\n  }\n};\n\nObject.extend(Element.Methods, {\n  getElementsBySelector: Element.Methods.select,\n\n  childElements: Element.Methods.immediateDescendants\n});\n\nElement._attributeTranslations = {\n  write: {\n    names: {\n      className: 'class',\n      htmlFor:   'for'\n    },\n    values: { }\n  }\n};\n\nif (Prototype.Browser.Opera) {\n  Element.Methods.getStyle = Element.Methods.getStyle.wrap(\n    function(proceed, element, style) {\n      switch (style) {\n        case 'left': case 'top': case 'right': case 'bottom':\n          if (proceed(element, 'position') === 'static') return null;\n        case 'height': case 'width':\n          if (!Element.visible(element)) return null;\n\n          var dim = parseInt(proceed(element, style), 10);\n\n          if (dim !== element['offset' + style.capitalize()])\n            return dim + 'px';\n\n          var properties;\n          if (style === 'height') {\n            properties = ['border-top-width', 'padding-top',\n             'padding-bottom', 'border-bottom-width'];\n          }\n          else {\n            properties = ['border-left-width', 'padding-left',\n             'padding-right', 'border-right-width'];\n          }\n          return properties.inject(dim, function(memo, property) {\n            var val = proceed(element, property);\n            return val === null ? memo : memo - parseInt(val, 10);\n          }) + 'px';\n        default: return proceed(element, style);\n      }\n    }\n  );\n\n  Element.Methods.readAttribute = Element.Methods.readAttribute.wrap(\n    function(proceed, element, attribute) {\n      if (attribute === 'title') return element.title;\n      return proceed(element, attribute);\n    }\n  );\n}\n\nelse if (Prototype.Browser.IE) {\n  Element.Methods.getOffsetParent = Element.Methods.getOffsetParent.wrap(\n    function(proceed, element) {\n      element = $(element);\n      try { element.offsetParent }\n      catch(e) { return $(document.body) }\n      var position = element.getStyle('position');\n      if (position !== 'static') return proceed(element);\n      element.setStyle({ position: 'relative' });\n      var value = proceed(element);\n      element.setStyle({ position: position });\n      return value;\n    }\n  );\n\n  $w('positionedOffset viewportOffset').each(function(method) {\n    Element.Methods[method] = Element.Methods[method].wrap(\n      function(proceed, element) {\n        element = $(element);\n        try { element.offsetParent }\n        catch(e) { return Element._returnOffset(0,0) }\n        var position = element.getStyle('position');\n        if (position !== 'static') return proceed(element);\n        var offsetParent = element.getOffsetParent();\n        if (offsetParent && offsetParent.getStyle('position') === 'fixed')\n          offsetParent.setStyle({ zoom: 1 });\n        element.setStyle({ position: 'relative' });\n        var value = proceed(element);\n        element.setStyle({ position: position });\n        return value;\n      }\n    );\n  });\n\n  Element.Methods.cumulativeOffset = Element.Methods.cumulativeOffset.wrap(\n    function(proceed, element) {\n      try { element.offsetParent }\n      catch(e) { return Element._returnOffset(0,0) }\n      return proceed(element);\n    }\n  );\n\n  Element.Methods.getStyle = function(element, style) {\n    element = $(element);\n    style = (style == 'float' || style == 'cssFloat') ? 'styleFloat' : style.camelize();\n    var value = element.style[style];\n    if (!value && element.currentStyle) value = element.currentStyle[style];\n\n    if (style == 'opacity') {\n      if (value = (element.getStyle('filter') || '').match(/alpha\\(opacity=(.*)\\)/))\n        if (value[1]) return parseFloat(value[1]) / 100;\n      return 1.0;\n    }\n\n    if (value == 'auto') {\n      if ((style == 'width' || style == 'height') && (element.getStyle('display') != 'none'))\n        return element['offset' + style.capitalize()] + 'px';\n      return null;\n    }\n    return value;\n  };\n\n  Element.Methods.setOpacity = function(element, value) {\n    function stripAlpha(filter){\n      return filter.replace(/alpha\\([^\\)]*\\)/gi,'');\n    }\n    element = $(element);\n    var currentStyle = element.currentStyle;\n    if ((currentStyle && !currentStyle.hasLayout) ||\n      (!currentStyle && element.style.zoom == 'normal'))\n        element.style.zoom = 1;\n\n    var filter = element.getStyle('filter'), style = element.style;\n    if (value == 1 || value === '') {\n      (filter = stripAlpha(filter)) ?\n        style.filter = filter : style.removeAttribute('filter');\n      return element;\n    } else if (value < 0.00001) value = 0;\n    style.filter = stripAlpha(filter) +\n      'alpha(opacity=' + (value * 100) + ')';\n    return element;\n  };\n\n  Element._attributeTranslations = (function(){\n\n    var classProp = 'className';\n    var forProp = 'for';\n\n    var el = document.createElement('div');\n\n    el.setAttribute(classProp, 'x');\n\n    if (el.className !== 'x') {\n      el.setAttribute('class', 'x');\n      if (el.className === 'x') {\n        classProp = 'class';\n      }\n    }\n    el = null;\n\n    el = document.createElement('label');\n    el.setAttribute(forProp, 'x');\n    if (el.htmlFor !== 'x') {\n      el.setAttribute('htmlFor', 'x');\n      if (el.htmlFor === 'x') {\n        forProp = 'htmlFor';\n      }\n    }\n    el = null;\n\n    return {\n      read: {\n        names: {\n          'class':      classProp,\n          'className':  classProp,\n          'for':        forProp,\n          'htmlFor':    forProp\n        },\n        values: {\n          _getAttr: function(element, attribute) {\n            return element.getAttribute(attribute);\n          },\n          _getAttr2: function(element, attribute) {\n            return element.getAttribute(attribute, 2);\n          },\n          _getAttrNode: function(element, attribute) {\n            var node = element.getAttributeNode(attribute);\n            return node ? node.value : \"\";\n          },\n          _getEv: (function(){\n\n            var el = document.createElement('div');\n            el.onclick = Prototype.emptyFunction;\n            var value = el.getAttribute('onclick');\n            var f;\n\n            if (String(value).indexOf('{') > -1) {\n              f = function(element, attribute) {\n                attribute = element.getAttribute(attribute);\n                if (!attribute) return null;\n                attribute = attribute.toString();\n                attribute = attribute.split('{')[1];\n                attribute = attribute.split('}')[0];\n                return attribute.strip();\n              };\n            }\n            else if (value === '') {\n              f = function(element, attribute) {\n                attribute = element.getAttribute(attribute);\n                if (!attribute) return null;\n                return attribute.strip();\n              };\n            }\n            el = null;\n            return f;\n          })(),\n          _flag: function(element, attribute) {\n            return $(element).hasAttribute(attribute) ? attribute : null;\n          },\n          style: function(element) {\n            return element.style.cssText.toLowerCase();\n          },\n          title: function(element) {\n            return element.title;\n          }\n        }\n      }\n    }\n  })();\n\n  Element._attributeTranslations.write = {\n    names: Object.extend({\n      cellpadding: 'cellPadding',\n      cellspacing: 'cellSpacing'\n    }, Element._attributeTranslations.read.names),\n    values: {\n      checked: function(element, value) {\n        element.checked = !!value;\n      },\n\n      style: function(element, value) {\n        element.style.cssText = value ? value : '';\n      }\n    }\n  };\n\n  Element._attributeTranslations.has = {};\n\n  $w('colSpan rowSpan vAlign dateTime accessKey tabIndex ' +\n      'encType maxLength readOnly longDesc frameBorder').each(function(attr) {\n    Element._attributeTranslations.write.names[attr.toLowerCase()] = attr;\n    Element._attributeTranslations.has[attr.toLowerCase()] = attr;\n  });\n\n  (function(v) {\n    Object.extend(v, {\n      href:        v._getAttr2,\n      src:         v._getAttr2,\n      type:        v._getAttr,\n      action:      v._getAttrNode,\n      disabled:    v._flag,\n      checked:     v._flag,\n      readonly:    v._flag,\n      multiple:    v._flag,\n      onload:      v._getEv,\n      onunload:    v._getEv,\n      onclick:     v._getEv,\n      ondblclick:  v._getEv,\n      onmousedown: v._getEv,\n      onmouseup:   v._getEv,\n      onmouseover: v._getEv,\n      onmousemove: v._getEv,\n      onmouseout:  v._getEv,\n      onfocus:     v._getEv,\n      onblur:      v._getEv,\n      onkeypress:  v._getEv,\n      onkeydown:   v._getEv,\n      onkeyup:     v._getEv,\n      onsubmit:    v._getEv,\n      onreset:     v._getEv,\n      onselect:    v._getEv,\n      onchange:    v._getEv\n    });\n  })(Element._attributeTranslations.read.values);\n\n  if (Prototype.BrowserFeatures.ElementExtensions) {\n    (function() {\n      function _descendants(element) {\n        var nodes = element.getElementsByTagName('*'), results = [];\n        for (var i = 0, node; node = nodes[i]; i++)\n          if (node.tagName !== \"!\") // Filter out comment nodes.\n            results.push(node);\n        return results;\n      }\n\n      Element.Methods.down = function(element, expression, index) {\n        element = $(element);\n        if (arguments.length == 1) return element.firstDescendant();\n        return Object.isNumber(expression) ? _descendants(element)[expression] :\n          Element.select(element, expression)[index || 0];\n      }\n    })();\n  }\n\n}\n\nelse if (Prototype.Browser.Gecko && /rv:1\\.8\\.0/.test(navigator.userAgent)) {\n  Element.Methods.setOpacity = function(element, value) {\n    element = $(element);\n    element.style.opacity = (value == 1) ? 0.999999 :\n      (value === '') ? '' : (value < 0.00001) ? 0 : value;\n    return element;\n  };\n}\n\nelse if (Prototype.Browser.WebKit) {\n  Element.Methods.setOpacity = function(element, value) {\n    element = $(element);\n    element.style.opacity = (value == 1 || value === '') ? '' :\n      (value < 0.00001) ? 0 : value;\n\n    if (value == 1)\n      if(element.tagName.toUpperCase() == 'IMG' && element.width) {\n        element.width++; element.width--;\n      } else try {\n        var n = document.createTextNode(' ');\n        element.appendChild(n);\n        element.removeChild(n);\n      } catch (e) { }\n\n    return element;\n  };\n\n  Element.Methods.cumulativeOffset = function(element) {\n    var valueT = 0, valueL = 0;\n    do {\n      valueT += element.offsetTop  || 0;\n      valueL += element.offsetLeft || 0;\n      if (element.offsetParent == document.body)\n        if (Element.getStyle(element, 'position') == 'absolute') break;\n\n      element = element.offsetParent;\n    } while (element);\n\n    return Element._returnOffset(valueL, valueT);\n  };\n}\n\nif ('outerHTML' in document.documentElement) {\n  Element.Methods.replace = function(element, content) {\n    element = $(element);\n\n    if (content && content.toElement) content = content.toElement();\n    if (Object.isElement(content)) {\n      element.parentNode.replaceChild(content, element);\n      return element;\n    }\n\n    content = Object.toHTML(content);\n    var parent = element.parentNode, tagName = parent.tagName.toUpperCase();\n\n    if (Element._insertionTranslations.tags[tagName]) {\n      var nextSibling = element.next();\n      var fragments = Element._getContentFromAnonymousElement(tagName, content.stripScripts());\n      parent.removeChild(element);\n      if (nextSibling)\n        fragments.each(function(node) { parent.insertBefore(node, nextSibling) });\n      else\n        fragments.each(function(node) { parent.appendChild(node) });\n    }\n    else element.outerHTML = content.stripScripts();\n\n    content.evalScripts.bind(content).defer();\n    return element;\n  };\n}\n\nElement._returnOffset = function(l, t) {\n  var result = [l, t];\n  result.left = l;\n  result.top = t;\n  return result;\n};\n\nElement._getContentFromAnonymousElement = function(tagName, html) {\n  var div = new Element('div'), t = Element._insertionTranslations.tags[tagName];\n  if (t) {\n    div.innerHTML = t[0] + html + t[1];\n    t[2].times(function() { div = div.firstChild });\n  } else div.innerHTML = html;\n  return $A(div.childNodes);\n};\n\nElement._insertionTranslations = {\n  before: function(element, node) {\n    element.parentNode.insertBefore(node, element);\n  },\n  top: function(element, node) {\n    element.insertBefore(node, element.firstChild);\n  },\n  bottom: function(element, node) {\n    element.appendChild(node);\n  },\n  after: function(element, node) {\n    element.parentNode.insertBefore(node, element.nextSibling);\n  },\n  tags: {\n    TABLE:  ['<table>',                '</table>',                   1],\n    TBODY:  ['<table><tbody>',         '</tbody></table>',           2],\n    TR:     ['<table><tbody><tr>',     '</tr></tbody></table>',      3],\n    TD:     ['<table><tbody><tr><td>', '</td></tr></tbody></table>', 4],\n    SELECT: ['<select>',               '</select>',                  1]\n  }\n};\n\n(function() {\n  var tags = Element._insertionTranslations.tags;\n  Object.extend(tags, {\n    THEAD: tags.TBODY,\n    TFOOT: tags.TBODY,\n    TH:    tags.TD\n  });\n})();\n\nElement.Methods.Simulated = {\n  hasAttribute: function(element, attribute) {\n    attribute = Element._attributeTranslations.has[attribute] || attribute;\n    var node = $(element).getAttributeNode(attribute);\n    return !!(node && node.specified);\n  }\n};\n\nElement.Methods.ByTag = { };\n\nObject.extend(Element, Element.Methods);\n\n(function(div) {\n\n  if (!Prototype.BrowserFeatures.ElementExtensions && div['__proto__']) {\n    window.HTMLElement = { };\n    window.HTMLElement.prototype = div['__proto__'];\n    Prototype.BrowserFeatures.ElementExtensions = true;\n  }\n\n  div = null;\n\n})(document.createElement('div'))\n\nElement.extend = (function() {\n\n  function checkDeficiency(tagName) {\n    if (typeof window.Element != 'undefined') {\n      var proto = window.Element.prototype;\n      if (proto) {\n        var id = '_' + (Math.random()+'').slice(2);\n        var el = document.createElement(tagName);\n        proto[id] = 'x';\n        var isBuggy = (el[id] !== 'x');\n        delete proto[id];\n        el = null;\n        return isBuggy;\n      }\n    }\n    return false;\n  }\n\n  function extendElementWith(element, methods) {\n    for (var property in methods) {\n      var value = methods[property];\n      if (Object.isFunction(value) && !(property in element))\n        element[property] = value.methodize();\n    }\n  }\n\n  var HTMLOBJECTELEMENT_PROTOTYPE_BUGGY = checkDeficiency('object');\n\n  if (Prototype.BrowserFeatures.SpecificElementExtensions) {\n    if (HTMLOBJECTELEMENT_PROTOTYPE_BUGGY) {\n      return function(element) {\n        if (element && typeof element._extendedByPrototype == 'undefined') {\n          var t = element.tagName;\n          if (t && (/^(?:object|applet|embed)$/i.test(t))) {\n            extendElementWith(element, Element.Methods);\n            extendElementWith(element, Element.Methods.Simulated);\n            extendElementWith(element, Element.Methods.ByTag[t.toUpperCase()]);\n          }\n        }\n        return element;\n      }\n    }\n    return Prototype.K;\n  }\n\n  var Methods = { }, ByTag = Element.Methods.ByTag;\n\n  var extend = Object.extend(function(element) {\n    if (!element || typeof element._extendedByPrototype != 'undefined' ||\n        element.nodeType != 1 || element == window) return element;\n\n    var methods = Object.clone(Methods),\n        tagName = element.tagName.toUpperCase();\n\n    if (ByTag[tagName]) Object.extend(methods, ByTag[tagName]);\n\n    extendElementWith(element, methods);\n\n    element._extendedByPrototype = Prototype.emptyFunction;\n    return element;\n\n  }, {\n    refresh: function() {\n      if (!Prototype.BrowserFeatures.ElementExtensions) {\n        Object.extend(Methods, Element.Methods);\n        Object.extend(Methods, Element.Methods.Simulated);\n      }\n    }\n  });\n\n  extend.refresh();\n  return extend;\n})();\n\nElement.hasAttribute = function(element, attribute) {\n  if (element.hasAttribute) return element.hasAttribute(attribute);\n  return Element.Methods.Simulated.hasAttribute(element, attribute);\n};\n\nElement.addMethods = function(methods) {\n  var F = Prototype.BrowserFeatures, T = Element.Methods.ByTag;\n\n  if (!methods) {\n    Object.extend(Form, Form.Methods);\n    Object.extend(Form.Element, Form.Element.Methods);\n    Object.extend(Element.Methods.ByTag, {\n      \"FORM\":     Object.clone(Form.Methods),\n      \"INPUT\":    Object.clone(Form.Element.Methods),\n      \"SELECT\":   Object.clone(Form.Element.Methods),\n      \"TEXTAREA\": Object.clone(Form.Element.Methods)\n    });\n  }\n\n  if (arguments.length == 2) {\n    var tagName = methods;\n    methods = arguments[1];\n  }\n\n  if (!tagName) Object.extend(Element.Methods, methods || { });\n  else {\n    if (Object.isArray(tagName)) tagName.each(extend);\n    else extend(tagName);\n  }\n\n  function extend(tagName) {\n    tagName = tagName.toUpperCase();\n    if (!Element.Methods.ByTag[tagName])\n      Element.Methods.ByTag[tagName] = { };\n    Object.extend(Element.Methods.ByTag[tagName], methods);\n  }\n\n  function copy(methods, destination, onlyIfAbsent) {\n    onlyIfAbsent = onlyIfAbsent || false;\n    for (var property in methods) {\n      var value = methods[property];\n      if (!Object.isFunction(value)) continue;\n      if (!onlyIfAbsent || !(property in destination))\n        destination[property] = value.methodize();\n    }\n  }\n\n  function findDOMClass(tagName) {\n    var klass;\n    var trans = {\n      \"OPTGROUP\": \"OptGroup\", \"TEXTAREA\": \"TextArea\", \"P\": \"Paragraph\",\n      \"FIELDSET\": \"FieldSet\", \"UL\": \"UList\", \"OL\": \"OList\", \"DL\": \"DList\",\n      \"DIR\": \"Directory\", \"H1\": \"Heading\", \"H2\": \"Heading\", \"H3\": \"Heading\",\n      \"H4\": \"Heading\", \"H5\": \"Heading\", \"H6\": \"Heading\", \"Q\": \"Quote\",\n      \"INS\": \"Mod\", \"DEL\": \"Mod\", \"A\": \"Anchor\", \"IMG\": \"Image\", \"CAPTION\":\n      \"TableCaption\", \"COL\": \"TableCol\", \"COLGROUP\": \"TableCol\", \"THEAD\":\n      \"TableSection\", \"TFOOT\": \"TableSection\", \"TBODY\": \"TableSection\", \"TR\":\n      \"TableRow\", \"TH\": \"TableCell\", \"TD\": \"TableCell\", \"FRAMESET\":\n      \"FrameSet\", \"IFRAME\": \"IFrame\"\n    };\n    if (trans[tagName]) klass = 'HTML' + trans[tagName] + 'Element';\n    if (window[klass]) return window[klass];\n    klass = 'HTML' + tagName + 'Element';\n    if (window[klass]) return window[klass];\n    klass = 'HTML' + tagName.capitalize() + 'Element';\n    if (window[klass]) return window[klass];\n\n    var element = document.createElement(tagName);\n    var proto = element['__proto__'] || element.constructor.prototype;\n    element = null;\n    return proto;\n  }\n\n  var elementPrototype = window.HTMLElement ? HTMLElement.prototype :\n   Element.prototype;\n\n  if (F.ElementExtensions) {\n    copy(Element.Methods, elementPrototype);\n    copy(Element.Methods.Simulated, elementPrototype, true);\n  }\n\n  if (F.SpecificElementExtensions) {\n    for (var tag in Element.Methods.ByTag) {\n      var klass = findDOMClass(tag);\n      if (Object.isUndefined(klass)) continue;\n      copy(T[tag], klass.prototype);\n    }\n  }\n\n  Object.extend(Element, Element.Methods);\n  delete Element.ByTag;\n\n  if (Element.extend.refresh) Element.extend.refresh();\n  Element.cache = { };\n};\n\n\ndocument.viewport = {\n\n  getDimensions: function() {\n    return { width: this.getWidth(), height: this.getHeight() };\n  },\n\n  getScrollOffsets: function() {\n    return Element._returnOffset(\n      window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft,\n      window.pageYOffset || document.documentElement.scrollTop  || document.body.scrollTop);\n  }\n};\n\n(function(viewport) {\n  var B = Prototype.Browser, doc = document, element, property = {};\n\n  function getRootElement() {\n    if (B.WebKit && !doc.evaluate)\n      return document;\n\n    if (B.Opera && window.parseFloat(window.opera.version()) < 9.5)\n      return document.body;\n\n    return document.documentElement;\n  }\n\n  function define(D) {\n    if (!element) element = getRootElement();\n\n    property[D] = 'client' + D;\n\n    viewport['get' + D] = function() { return element[property[D]] };\n    return viewport['get' + D]();\n  }\n\n  viewport.getWidth  = define.curry('Width');\n\n  viewport.getHeight = define.curry('Height');\n})(document.viewport);\n\n\nElement.Storage = {\n  UID: 1\n};\n\nElement.addMethods({\n  getStorage: function(element) {\n    if (!(element = $(element))) return;\n\n    var uid;\n    if (element === window) {\n      uid = 0;\n    } else {\n      if (typeof element._prototypeUID === \"undefined\")\n        element._prototypeUID = [Element.Storage.UID++];\n      uid = element._prototypeUID[0];\n    }\n\n    if (!Element.Storage[uid])\n      Element.Storage[uid] = $H();\n\n    return Element.Storage[uid];\n  },\n\n  store: function(element, key, value) {\n    if (!(element = $(element))) return;\n\n    if (arguments.length === 2) {\n      Element.getStorage(element).update(key);\n    } else {\n      Element.getStorage(element).set(key, value);\n    }\n\n    return element;\n  },\n\n  retrieve: function(element, key, defaultValue) {\n    if (!(element = $(element))) return;\n    var hash = Element.getStorage(element), value = hash.get(key);\n\n    if (Object.isUndefined(value)) {\n      hash.set(key, defaultValue);\n      value = defaultValue;\n    }\n\n    return value;\n  },\n\n  clone: function(element, deep) {\n    if (!(element = $(element))) return;\n    var clone = element.cloneNode(deep);\n    clone._prototypeUID = void 0;\n    if (deep) {\n      var descendants = Element.select(clone, '*'),\n          i = descendants.length;\n      while (i--) {\n        descendants[i]._prototypeUID = void 0;\n      }\n    }\n    return Element.extend(clone);\n  }\n});\n/* Portions of the Selector class are derived from Jack Slocum's DomQuery,\n * part of YUI-Ext version 0.40, distributed under the terms of an MIT-style\n * license.  Please see http://www.yui-ext.com/ for more information. */\n\nvar Selector = Class.create({\n  initialize: function(expression) {\n    this.expression = expression.strip();\n\n    if (this.shouldUseSelectorsAPI()) {\n      this.mode = 'selectorsAPI';\n    } else if (this.shouldUseXPath()) {\n      this.mode = 'xpath';\n      this.compileXPathMatcher();\n    } else {\n      this.mode = \"normal\";\n      this.compileMatcher();\n    }\n\n  },\n\n  shouldUseXPath: (function() {\n\n    var IS_DESCENDANT_SELECTOR_BUGGY = (function(){\n      var isBuggy = false;\n      if (document.evaluate && window.XPathResult) {\n        var el = document.createElement('div');\n        el.innerHTML = '<ul><li></li></ul><div><ul><li></li></ul></div>';\n\n        var xpath = \".//*[local-name()='ul' or local-name()='UL']\" +\n          \"//*[local-name()='li' or local-name()='LI']\";\n\n        var result = document.evaluate(xpath, el, null,\n          XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n\n        isBuggy = (result.snapshotLength !== 2);\n        el = null;\n      }\n      return isBuggy;\n    })();\n\n    return function() {\n      if (!Prototype.BrowserFeatures.XPath) return false;\n\n      var e = this.expression;\n\n      if (Prototype.Browser.WebKit &&\n       (e.include(\"-of-type\") || e.include(\":empty\")))\n        return false;\n\n      if ((/(\\[[\\w-]*?:|:checked)/).test(e))\n        return false;\n\n      if (IS_DESCENDANT_SELECTOR_BUGGY) return false;\n\n      return true;\n    }\n\n  })(),\n\n  shouldUseSelectorsAPI: function() {\n    if (!Prototype.BrowserFeatures.SelectorsAPI) return false;\n\n    if (Selector.CASE_INSENSITIVE_CLASS_NAMES) return false;\n\n    if (!Selector._div) Selector._div = new Element('div');\n\n    try {\n      Selector._div.querySelector(this.expression);\n    } catch(e) {\n      return false;\n    }\n\n    return true;\n  },\n\n  compileMatcher: function() {\n    var e = this.expression, ps = Selector.patterns, h = Selector.handlers,\n        c = Selector.criteria, le, p, m, len = ps.length, name;\n\n    if (Selector._cache[e]) {\n      this.matcher = Selector._cache[e];\n      return;\n    }\n\n    this.matcher = [\"this.matcher = function(root) {\",\n                    \"var r = root, h = Selector.handlers, c = false, n;\"];\n\n    while (e && le != e && (/\\S/).test(e)) {\n      le = e;\n      for (var i = 0; i<len; i++) {\n        p = ps[i].re;\n        name = ps[i].name;\n        if (m = e.match(p)) {\n          this.matcher.push(Object.isFunction(c[name]) ? c[name](m) :\n            new Template(c[name]).evaluate(m));\n          e = e.replace(m[0], '');\n          break;\n        }\n      }\n    }\n\n    this.matcher.push(\"return h.unique(n);\\n}\");\n    eval(this.matcher.join('\\n'));\n    Selector._cache[this.expression] = this.matcher;\n  },\n\n  compileXPathMatcher: function() {\n    var e = this.expression, ps = Selector.patterns,\n        x = Selector.xpath, le, m, len = ps.length, name;\n\n    if (Selector._cache[e]) {\n      this.xpath = Selector._cache[e]; return;\n    }\n\n    this.matcher = ['.//*'];\n    while (e && le != e && (/\\S/).test(e)) {\n      le = e;\n      for (var i = 0; i<len; i++) {\n        name = ps[i].name;\n        if (m = e.match(ps[i].re)) {\n          this.matcher.push(Object.isFunction(x[name]) ? x[name](m) :\n            new Template(x[name]).evaluate(m));\n          e = e.replace(m[0], '');\n          break;\n        }\n      }\n    }\n\n    this.xpath = this.matcher.join('');\n    Selector._cache[this.expression] = this.xpath;\n  },\n\n  findElements: function(root) {\n    root = root || document;\n    var e = this.expression, results;\n\n    switch (this.mode) {\n      case 'selectorsAPI':\n        if (root !== document) {\n          var oldId = root.id, id = $(root).identify();\n          id = id.replace(/([\\.:])/g, \"\\\\$1\");\n          e = \"#\" + id + \" \" + e;\n        }\n\n        results = $A(root.querySelectorAll(e)).map(Element.extend);\n        root.id = oldId;\n\n        return results;\n      case 'xpath':\n        return document._getElementsByXPath(this.xpath, root);\n      default:\n       return this.matcher(root);\n    }\n  },\n\n  match: function(element) {\n    this.tokens = [];\n\n    var e = this.expression, ps = Selector.patterns, as = Selector.assertions;\n    var le, p, m, len = ps.length, name;\n\n    while (e && le !== e && (/\\S/).test(e)) {\n      le = e;\n      for (var i = 0; i<len; i++) {\n        p = ps[i].re;\n        name = ps[i].name;\n        if (m = e.match(p)) {\n          if (as[name]) {\n            this.tokens.push([name, Object.clone(m)]);\n            e = e.replace(m[0], '');\n          } else {\n            return this.findElements(document).include(element);\n          }\n        }\n      }\n    }\n\n    var match = true, name, matches;\n    for (var i = 0, token; token = this.tokens[i]; i++) {\n      name = token[0], matches = token[1];\n      if (!Selector.assertions[name](element, matches)) {\n        match = false; break;\n      }\n    }\n\n    return match;\n  },\n\n  toString: function() {\n    return this.expression;\n  },\n\n  inspect: function() {\n    return \"#<Selector:\" + this.expression.inspect() + \">\";\n  }\n});\n\nif (Prototype.BrowserFeatures.SelectorsAPI &&\n document.compatMode === 'BackCompat') {\n  Selector.CASE_INSENSITIVE_CLASS_NAMES = (function(){\n    var div = document.createElement('div'),\n     span = document.createElement('span');\n\n    div.id = \"prototype_test_id\";\n    span.className = 'Test';\n    div.appendChild(span);\n    var isIgnored = (div.querySelector('#prototype_test_id .test') !== null);\n    div = span = null;\n    return isIgnored;\n  })();\n}\n\nObject.extend(Selector, {\n  _cache: { },\n\n  xpath: {\n    descendant:   \"//*\",\n    child:        \"/*\",\n    adjacent:     \"/following-sibling::*[1]\",\n    laterSibling: '/following-sibling::*',\n    tagName:      function(m) {\n      if (m[1] == '*') return '';\n      return \"[local-name()='\" + m[1].toLowerCase() +\n             \"' or local-name()='\" + m[1].toUpperCase() + \"']\";\n    },\n    className:    \"[contains(concat(' ', @class, ' '), ' #{1} ')]\",\n    id:           \"[@id='#{1}']\",\n    attrPresence: function(m) {\n      m[1] = m[1].toLowerCase();\n      return new Template(\"[@#{1}]\").evaluate(m);\n    },\n    attr: function(m) {\n      m[1] = m[1].toLowerCase();\n      m[3] = m[5] || m[6];\n      return new Template(Selector.xpath.operators[m[2]]).evaluate(m);\n    },\n    pseudo: function(m) {\n      var h = Selector.xpath.pseudos[m[1]];\n      if (!h) return '';\n      if (Object.isFunction(h)) return h(m);\n      return new Template(Selector.xpath.pseudos[m[1]]).evaluate(m);\n    },\n    operators: {\n      '=':  \"[@#{1}='#{3}']\",\n      '!=': \"[@#{1}!='#{3}']\",\n      '^=': \"[starts-with(@#{1}, '#{3}')]\",\n      '$=': \"[substring(@#{1}, (string-length(@#{1}) - string-length('#{3}') + 1))='#{3}']\",\n      '*=': \"[contains(@#{1}, '#{3}')]\",\n      '~=': \"[contains(concat(' ', @#{1}, ' '), ' #{3} ')]\",\n      '|=': \"[contains(concat('-', @#{1}, '-'), '-#{3}-')]\"\n    },\n    pseudos: {\n      'first-child': '[not(preceding-sibling::*)]',\n      'last-child':  '[not(following-sibling::*)]',\n      'only-child':  '[not(preceding-sibling::* or following-sibling::*)]',\n      'empty':       \"[count(*) = 0 and (count(text()) = 0)]\",\n      'checked':     \"[@checked]\",\n      'disabled':    \"[(@disabled) and (@type!='hidden')]\",\n      'enabled':     \"[not(@disabled) and (@type!='hidden')]\",\n      'not': function(m) {\n        var e = m[6], p = Selector.patterns,\n            x = Selector.xpath, le, v, len = p.length, name;\n\n        var exclusion = [];\n        while (e && le != e && (/\\S/).test(e)) {\n          le = e;\n          for (var i = 0; i<len; i++) {\n            name = p[i].name\n            if (m = e.match(p[i].re)) {\n              v = Object.isFunction(x[name]) ? x[name](m) : new Template(x[name]).evaluate(m);\n              exclusion.push(\"(\" + v.substring(1, v.length - 1) + \")\");\n              e = e.replace(m[0], '');\n              break;\n            }\n          }\n        }\n        return \"[not(\" + exclusion.join(\" and \") + \")]\";\n      },\n      'nth-child':      function(m) {\n        return Selector.xpath.pseudos.nth(\"(count(./preceding-sibling::*) + 1) \", m);\n      },\n      'nth-last-child': function(m) {\n        return Selector.xpath.pseudos.nth(\"(count(./following-sibling::*) + 1) \", m);\n      },\n      'nth-of-type':    function(m) {\n        return Selector.xpath.pseudos.nth(\"position() \", m);\n      },\n      'nth-last-of-type': function(m) {\n        return Selector.xpath.pseudos.nth(\"(last() + 1 - position()) \", m);\n      },\n      'first-of-type':  function(m) {\n        m[6] = \"1\"; return Selector.xpath.pseudos['nth-of-type'](m);\n      },\n      'last-of-type':   function(m) {\n        m[6] = \"1\"; return Selector.xpath.pseudos['nth-last-of-type'](m);\n      },\n      'only-of-type':   function(m) {\n        var p = Selector.xpath.pseudos; return p['first-of-type'](m) + p['last-of-type'](m);\n      },\n      nth: function(fragment, m) {\n        var mm, formula = m[6], predicate;\n        if (formula == 'even') formula = '2n+0';\n        if (formula == 'odd')  formula = '2n+1';\n        if (mm = formula.match(/^(\\d+)$/)) // digit only\n          return '[' + fragment + \"= \" + mm[1] + ']';\n        if (mm = formula.match(/^(-?\\d*)?n(([+-])(\\d+))?/)) { // an+b\n          if (mm[1] == \"-\") mm[1] = -1;\n          var a = mm[1] ? Number(mm[1]) : 1;\n          var b = mm[2] ? Number(mm[2]) : 0;\n          predicate = \"[((#{fragment} - #{b}) mod #{a} = 0) and \" +\n          \"((#{fragment} - #{b}) div #{a} >= 0)]\";\n          return new Template(predicate).evaluate({\n            fragment: fragment, a: a, b: b });\n        }\n      }\n    }\n  },\n\n  criteria: {\n    tagName:      'n = h.tagName(n, r, \"#{1}\", c);      c = false;',\n    className:    'n = h.className(n, r, \"#{1}\", c);    c = false;',\n    id:           'n = h.id(n, r, \"#{1}\", c);           c = false;',\n    attrPresence: 'n = h.attrPresence(n, r, \"#{1}\", c); c = false;',\n    attr: function(m) {\n      m[3] = (m[5] || m[6]);\n      return new Template('n = h.attr(n, r, \"#{1}\", \"#{3}\", \"#{2}\", c); c = false;').evaluate(m);\n    },\n    pseudo: function(m) {\n      if (m[6]) m[6] = m[6].replace(/\"/g, '\\\\\"');\n      return new Template('n = h.pseudo(n, \"#{1}\", \"#{6}\", r, c); c = false;').evaluate(m);\n    },\n    descendant:   'c = \"descendant\";',\n    child:        'c = \"child\";',\n    adjacent:     'c = \"adjacent\";',\n    laterSibling: 'c = \"laterSibling\";'\n  },\n\n  patterns: [\n    { name: 'laterSibling', re: /^\\s*~\\s*/ },\n    { name: 'child',        re: /^\\s*>\\s*/ },\n    { name: 'adjacent',     re: /^\\s*\\+\\s*/ },\n    { name: 'descendant',   re: /^\\s/ },\n\n    { name: 'tagName',      re: /^\\s*(\\*|[\\w\\-]+)(\\b|$)?/ },\n    { name: 'id',           re: /^#([\\w\\-\\*]+)(\\b|$)/ },\n    { name: 'className',    re: /^\\.([\\w\\-\\*]+)(\\b|$)/ },\n    { name: 'pseudo',       re: /^:((first|last|nth|nth-last|only)(-child|-of-type)|empty|checked|(en|dis)abled|not)(\\((.*?)\\))?(\\b|$|(?=\\s|[:+~>]))/ },\n    { name: 'attrPresence', re: /^\\[((?:[\\w-]+:)?[\\w-]+)\\]/ },\n    { name: 'attr',         re: /\\[((?:[\\w-]*:)?[\\w-]+)\\s*(?:([!^$*~|]?=)\\s*((['\"])([^\\4]*?)\\4|([^'\"][^\\]]*?)))?\\]/ }\n  ],\n\n  assertions: {\n    tagName: function(element, matches) {\n      return matches[1].toUpperCase() == element.tagName.toUpperCase();\n    },\n\n    className: function(element, matches) {\n      return Element.hasClassName(element, matches[1]);\n    },\n\n    id: function(element, matches) {\n      return element.id === matches[1];\n    },\n\n    attrPresence: function(element, matches) {\n      return Element.hasAttribute(element, matches[1]);\n    },\n\n    attr: function(element, matches) {\n      var nodeValue = Element.readAttribute(element, matches[1]);\n      return nodeValue && Selector.operators[matches[2]](nodeValue, matches[5] || matches[6]);\n    }\n  },\n\n  handlers: {\n    concat: function(a, b) {\n      for (var i = 0, node; node = b[i]; i++)\n        a.push(node);\n      return a;\n    },\n\n    mark: function(nodes) {\n      var _true = Prototype.emptyFunction;\n      for (var i = 0, node; node = nodes[i]; i++)\n        node._countedByPrototype = _true;\n      return nodes;\n    },\n\n    unmark: (function(){\n\n      var PROPERTIES_ATTRIBUTES_MAP = (function(){\n        var el = document.createElement('div'),\n            isBuggy = false,\n            propName = '_countedByPrototype',\n            value = 'x'\n        el[propName] = value;\n        isBuggy = (el.getAttribute(propName) === value);\n        el = null;\n        return isBuggy;\n      })();\n\n      return PROPERTIES_ATTRIBUTES_MAP ?\n        function(nodes) {\n          for (var i = 0, node; node = nodes[i]; i++)\n            node.removeAttribute('_countedByPrototype');\n          return nodes;\n        } :\n        function(nodes) {\n          for (var i = 0, node; node = nodes[i]; i++)\n            node._countedByPrototype = void 0;\n          return nodes;\n        }\n    })(),\n\n    index: function(parentNode, reverse, ofType) {\n      parentNode._countedByPrototype = Prototype.emptyFunction;\n      if (reverse) {\n        for (var nodes = parentNode.childNodes, i = nodes.length - 1, j = 1; i >= 0; i--) {\n          var node = nodes[i];\n          if (node.nodeType == 1 && (!ofType || node._countedByPrototype)) node.nodeIndex = j++;\n        }\n      } else {\n        for (var i = 0, j = 1, nodes = parentNode.childNodes; node = nodes[i]; i++)\n          if (node.nodeType == 1 && (!ofType || node._countedByPrototype)) node.nodeIndex = j++;\n      }\n    },\n\n    unique: function(nodes) {\n      if (nodes.length == 0) return nodes;\n      var results = [], n;\n      for (var i = 0, l = nodes.length; i < l; i++)\n        if (typeof (n = nodes[i])._countedByPrototype == 'undefined') {\n          n._countedByPrototype = Prototype.emptyFunction;\n          results.push(Element.extend(n));\n        }\n      return Selector.handlers.unmark(results);\n    },\n\n    descendant: function(nodes) {\n      var h = Selector.handlers;\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        h.concat(results, node.getElementsByTagName('*'));\n      return results;\n    },\n\n    child: function(nodes) {\n      var h = Selector.handlers;\n      for (var i = 0, results = [], node; node = nodes[i]; i++) {\n        for (var j = 0, child; child = node.childNodes[j]; j++)\n          if (child.nodeType == 1 && child.tagName != '!') results.push(child);\n      }\n      return results;\n    },\n\n    adjacent: function(nodes) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++) {\n        var next = this.nextElementSibling(node);\n        if (next) results.push(next);\n      }\n      return results;\n    },\n\n    laterSibling: function(nodes) {\n      var h = Selector.handlers;\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        h.concat(results, Element.nextSiblings(node));\n      return results;\n    },\n\n    nextElementSibling: function(node) {\n      while (node = node.nextSibling)\n        if (node.nodeType == 1) return node;\n      return null;\n    },\n\n    previousElementSibling: function(node) {\n      while (node = node.previousSibling)\n        if (node.nodeType == 1) return node;\n      return null;\n    },\n\n    tagName: function(nodes, root, tagName, combinator) {\n      var uTagName = tagName.toUpperCase();\n      var results = [], h = Selector.handlers;\n      if (nodes) {\n        if (combinator) {\n          if (combinator == \"descendant\") {\n            for (var i = 0, node; node = nodes[i]; i++)\n              h.concat(results, node.getElementsByTagName(tagName));\n            return results;\n          } else nodes = this[combinator](nodes);\n          if (tagName == \"*\") return nodes;\n        }\n        for (var i = 0, node; node = nodes[i]; i++)\n          if (node.tagName.toUpperCase() === uTagName) results.push(node);\n        return results;\n      } else return root.getElementsByTagName(tagName);\n    },\n\n    id: function(nodes, root, id, combinator) {\n      var targetNode = $(id), h = Selector.handlers;\n\n      if (root == document) {\n        if (!targetNode) return [];\n        if (!nodes) return [targetNode];\n      } else {\n        if (!root.sourceIndex || root.sourceIndex < 1) {\n          var nodes = root.getElementsByTagName('*');\n          for (var j = 0, node; node = nodes[j]; j++) {\n            if (node.id === id) return [node];\n          }\n        }\n      }\n\n      if (nodes) {\n        if (combinator) {\n          if (combinator == 'child') {\n            for (var i = 0, node; node = nodes[i]; i++)\n              if (targetNode.parentNode == node) return [targetNode];\n          } else if (combinator == 'descendant') {\n            for (var i = 0, node; node = nodes[i]; i++)\n              if (Element.descendantOf(targetNode, node)) return [targetNode];\n          } else if (combinator == 'adjacent') {\n            for (var i = 0, node; node = nodes[i]; i++)\n              if (Selector.handlers.previousElementSibling(targetNode) == node)\n                return [targetNode];\n          } else nodes = h[combinator](nodes);\n        }\n        for (var i = 0, node; node = nodes[i]; i++)\n          if (node == targetNode) return [targetNode];\n        return [];\n      }\n      return (targetNode && Element.descendantOf(targetNode, root)) ? [targetNode] : [];\n    },\n\n    className: function(nodes, root, className, combinator) {\n      if (nodes && combinator) nodes = this[combinator](nodes);\n      return Selector.handlers.byClassName(nodes, root, className);\n    },\n\n    byClassName: function(nodes, root, className) {\n      if (!nodes) nodes = Selector.handlers.descendant([root]);\n      var needle = ' ' + className + ' ';\n      for (var i = 0, results = [], node, nodeClassName; node = nodes[i]; i++) {\n        nodeClassName = node.className;\n        if (nodeClassName.length == 0) continue;\n        if (nodeClassName == className || (' ' + nodeClassName + ' ').include(needle))\n          results.push(node);\n      }\n      return results;\n    },\n\n    attrPresence: function(nodes, root, attr, combinator) {\n      if (!nodes) nodes = root.getElementsByTagName(\"*\");\n      if (nodes && combinator) nodes = this[combinator](nodes);\n      var results = [];\n      for (var i = 0, node; node = nodes[i]; i++)\n        if (Element.hasAttribute(node, attr)) results.push(node);\n      return results;\n    },\n\n    attr: function(nodes, root, attr, value, operator, combinator) {\n      if (!nodes) nodes = root.getElementsByTagName(\"*\");\n      if (nodes && combinator) nodes = this[combinator](nodes);\n      var handler = Selector.operators[operator], results = [];\n      for (var i = 0, node; node = nodes[i]; i++) {\n        var nodeValue = Element.readAttribute(node, attr);\n        if (nodeValue === null) continue;\n        if (handler(nodeValue, value)) results.push(node);\n      }\n      return results;\n    },\n\n    pseudo: function(nodes, name, value, root, combinator) {\n      if (nodes && combinator) nodes = this[combinator](nodes);\n      if (!nodes) nodes = root.getElementsByTagName(\"*\");\n      return Selector.pseudos[name](nodes, value, root);\n    }\n  },\n\n  pseudos: {\n    'first-child': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++) {\n        if (Selector.handlers.previousElementSibling(node)) continue;\n          results.push(node);\n      }\n      return results;\n    },\n    'last-child': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++) {\n        if (Selector.handlers.nextElementSibling(node)) continue;\n          results.push(node);\n      }\n      return results;\n    },\n    'only-child': function(nodes, value, root) {\n      var h = Selector.handlers;\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        if (!h.previousElementSibling(node) && !h.nextElementSibling(node))\n          results.push(node);\n      return results;\n    },\n    'nth-child':        function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, formula, root);\n    },\n    'nth-last-child':   function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, formula, root, true);\n    },\n    'nth-of-type':      function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, formula, root, false, true);\n    },\n    'nth-last-of-type': function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, formula, root, true, true);\n    },\n    'first-of-type':    function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, \"1\", root, false, true);\n    },\n    'last-of-type':     function(nodes, formula, root) {\n      return Selector.pseudos.nth(nodes, \"1\", root, true, true);\n    },\n    'only-of-type':     function(nodes, formula, root) {\n      var p = Selector.pseudos;\n      return p['last-of-type'](p['first-of-type'](nodes, formula, root), formula, root);\n    },\n\n    getIndices: function(a, b, total) {\n      if (a == 0) return b > 0 ? [b] : [];\n      return $R(1, total).inject([], function(memo, i) {\n        if (0 == (i - b) % a && (i - b) / a >= 0) memo.push(i);\n        return memo;\n      });\n    },\n\n    nth: function(nodes, formula, root, reverse, ofType) {\n      if (nodes.length == 0) return [];\n      if (formula == 'even') formula = '2n+0';\n      if (formula == 'odd')  formula = '2n+1';\n      var h = Selector.handlers, results = [], indexed = [], m;\n      h.mark(nodes);\n      for (var i = 0, node; node = nodes[i]; i++) {\n        if (!node.parentNode._countedByPrototype) {\n          h.index(node.parentNode, reverse, ofType);\n          indexed.push(node.parentNode);\n        }\n      }\n      if (formula.match(/^\\d+$/)) { // just a number\n        formula = Number(formula);\n        for (var i = 0, node; node = nodes[i]; i++)\n          if (node.nodeIndex == formula) results.push(node);\n      } else if (m = formula.match(/^(-?\\d*)?n(([+-])(\\d+))?/)) { // an+b\n        if (m[1] == \"-\") m[1] = -1;\n        var a = m[1] ? Number(m[1]) : 1;\n        var b = m[2] ? Number(m[2]) : 0;\n        var indices = Selector.pseudos.getIndices(a, b, nodes.length);\n        for (var i = 0, node, l = indices.length; node = nodes[i]; i++) {\n          for (var j = 0; j < l; j++)\n            if (node.nodeIndex == indices[j]) results.push(node);\n        }\n      }\n      h.unmark(nodes);\n      h.unmark(indexed);\n      return results;\n    },\n\n    'empty': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++) {\n        if (node.tagName == '!' || node.firstChild) continue;\n        results.push(node);\n      }\n      return results;\n    },\n\n    'not': function(nodes, selector, root) {\n      var h = Selector.handlers, selectorType, m;\n      var exclusions = new Selector(selector).findElements(root);\n      h.mark(exclusions);\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        if (!node._countedByPrototype) results.push(node);\n      h.unmark(exclusions);\n      return results;\n    },\n\n    'enabled': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        if (!node.disabled && (!node.type || node.type !== 'hidden'))\n          results.push(node);\n      return results;\n    },\n\n    'disabled': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        if (node.disabled) results.push(node);\n      return results;\n    },\n\n    'checked': function(nodes, value, root) {\n      for (var i = 0, results = [], node; node = nodes[i]; i++)\n        if (node.checked) results.push(node);\n      return results;\n    }\n  },\n\n  operators: {\n    '=':  function(nv, v) { return nv == v; },\n    '!=': function(nv, v) { return nv != v; },\n    '^=': function(nv, v) { return nv == v || nv && nv.startsWith(v); },\n    '$=': function(nv, v) { return nv == v || nv && nv.endsWith(v); },\n    '*=': function(nv, v) { return nv == v || nv && nv.include(v); },\n    '~=': function(nv, v) { return (' ' + nv + ' ').include(' ' + v + ' '); },\n    '|=': function(nv, v) { return ('-' + (nv || \"\").toUpperCase() +\n     '-').include('-' + (v || \"\").toUpperCase() + '-'); }\n  },\n\n  split: function(expression) {\n    var expressions = [];\n    expression.scan(/(([\\w#:.~>+()\\s-]+|\\*|\\[.*?\\])+)\\s*(,|$)/, function(m) {\n      expressions.push(m[1].strip());\n    });\n    return expressions;\n  },\n\n  matchElements: function(elements, expression) {\n    var matches = $$(expression), h = Selector.handlers;\n    h.mark(matches);\n    for (var i = 0, results = [], element; element = elements[i]; i++)\n      if (element._countedByPrototype) results.push(element);\n    h.unmark(matches);\n    return results;\n  },\n\n  findElement: function(elements, expression, index) {\n    if (Object.isNumber(expression)) {\n      index = expression; expression = false;\n    }\n    return Selector.matchElements(elements, expression || '*')[index || 0];\n  },\n\n  findChildElements: function(element, expressions) {\n    expressions = Selector.split(expressions.join(','));\n    var results = [], h = Selector.handlers;\n    for (var i = 0, l = expressions.length, selector; i < l; i++) {\n      selector = new Selector(expressions[i].strip());\n      h.concat(results, selector.findElements(element));\n    }\n    return (l > 1) ? h.unique(results) : results;\n  }\n});\n\nif (Prototype.Browser.IE) {\n  Object.extend(Selector.handlers, {\n    concat: function(a, b) {\n      for (var i = 0, node; node = b[i]; i++)\n        if (node.tagName !== \"!\") a.push(node);\n      return a;\n    }\n  });\n}\n\nfunction $$() {\n  return Selector.findChildElements(document, $A(arguments));\n}\n\nvar Form = {\n  reset: function(form) {\n    form = $(form);\n    form.reset();\n    return form;\n  },\n\n  serializeElements: function(elements, options) {\n    if (typeof options != 'object') options = { hash: !!options };\n    else if (Object.isUndefined(options.hash)) options.hash = true;\n    var key, value, submitted = false, submit = options.submit;\n\n    var data = elements.inject({ }, function(result, element) {\n      if (!element.disabled && element.name) {\n        key = element.name; value = $(element).getValue();\n        if (value != null && element.type != 'file' && (element.type != 'submit' || (!submitted &&\n            submit !== false && (!submit || key == submit) && (submitted = true)))) {\n          if (key in result) {\n            if (!Object.isArray(result[key])) result[key] = [result[key]];\n            result[key].push(value);\n          }\n          else result[key] = value;\n        }\n      }\n      return result;\n    });\n\n    return options.hash ? data : Object.toQueryString(data);\n  }\n};\n\nForm.Methods = {\n  serialize: function(form, options) {\n    return Form.serializeElements(Form.getElements(form), options);\n  },\n\n  getElements: function(form) {\n    var elements = $(form).getElementsByTagName('*'),\n        element,\n        arr = [ ],\n        serializers = Form.Element.Serializers;\n    for (var i = 0; element = elements[i]; i++) {\n      arr.push(element);\n    }\n    return arr.inject([], function(elements, child) {\n      if (serializers[child.tagName.toLowerCase()])\n        elements.push(Element.extend(child));\n      return elements;\n    })\n  },\n\n  getInputs: function(form, typeName, name) {\n    form = $(form);\n    var inputs = form.getElementsByTagName('input');\n\n    if (!typeName && !name) return $A(inputs).map(Element.extend);\n\n    for (var i = 0, matchingInputs = [], length = inputs.length; i < length; i++) {\n      var input = inputs[i];\n      if ((typeName && input.type != typeName) || (name && input.name != name))\n        continue;\n      matchingInputs.push(Element.extend(input));\n    }\n\n    return matchingInputs;\n  },\n\n  disable: function(form) {\n    form = $(form);\n    Form.getElements(form).invoke('disable');\n    return form;\n  },\n\n  enable: function(form) {\n    form = $(form);\n    Form.getElements(form).invoke('enable');\n    return form;\n  },\n\n  findFirstElement: function(form) {\n    var elements = $(form).getElements().findAll(function(element) {\n      return 'hidden' != element.type && !element.disabled;\n    });\n    var firstByIndex = elements.findAll(function(element) {\n      return element.hasAttribute('tabIndex') && element.tabIndex >= 0;\n    }).sortBy(function(element) { return element.tabIndex }).first();\n\n    return firstByIndex ? firstByIndex : elements.find(function(element) {\n      return /^(?:input|select|textarea)$/i.test(element.tagName);\n    });\n  },\n\n  focusFirstElement: function(form) {\n    form = $(form);\n    form.findFirstElement().activate();\n    return form;\n  },\n\n  request: function(form, options) {\n    form = $(form), options = Object.clone(options || { });\n\n    var params = options.parameters, action = form.readAttribute('action') || '';\n    if (action.blank()) action = window.location.href;\n    options.parameters = form.serialize(true);\n\n    if (params) {\n      if (Object.isString(params)) params = params.toQueryParams();\n      Object.extend(options.parameters, params);\n    }\n\n    if (form.hasAttribute('method') && !options.method)\n      options.method = form.method;\n\n    return new Ajax.Request(action, options);\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\n\nForm.Element = {\n  focus: function(element) {\n    $(element).focus();\n    return element;\n  },\n\n  select: function(element) {\n    $(element).select();\n    return element;\n  }\n};\n\nForm.Element.Methods = {\n\n  serialize: function(element) {\n    element = $(element);\n    if (!element.disabled && element.name) {\n      var value = element.getValue();\n      if (value != undefined) {\n        var pair = { };\n        pair[element.name] = value;\n        return Object.toQueryString(pair);\n      }\n    }\n    return '';\n  },\n\n  getValue: function(element) {\n    element = $(element);\n    var method = element.tagName.toLowerCase();\n    return Form.Element.Serializers[method](element);\n  },\n\n  setValue: function(element, value) {\n    element = $(element);\n    var method = element.tagName.toLowerCase();\n    Form.Element.Serializers[method](element, value);\n    return element;\n  },\n\n  clear: function(element) {\n    $(element).value = '';\n    return element;\n  },\n\n  present: function(element) {\n    return $(element).value != '';\n  },\n\n  activate: function(element) {\n    element = $(element);\n    try {\n      element.focus();\n      if (element.select && (element.tagName.toLowerCase() != 'input' ||\n          !(/^(?:button|reset|submit)$/i.test(element.type))))\n        element.select();\n    } catch (e) { }\n    return element;\n  },\n\n  disable: function(element) {\n    element = $(element);\n    element.disabled = true;\n    return element;\n  },\n\n  enable: function(element) {\n    element = $(element);\n    element.disabled = false;\n    return element;\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\nvar Field = Form.Element;\n\nvar $F = Form.Element.Methods.getValue;\n\n/*--------------------------------------------------------------------------*/\n\nForm.Element.Serializers = {\n  input: function(element, value) {\n    switch (element.type.toLowerCase()) {\n      case 'checkbox':\n      case 'radio':\n        return Form.Element.Serializers.inputSelector(element, value);\n      default:\n        return Form.Element.Serializers.textarea(element, value);\n    }\n  },\n\n  inputSelector: function(element, value) {\n    if (Object.isUndefined(value)) return element.checked ? element.value : null;\n    else element.checked = !!value;\n  },\n\n  textarea: function(element, value) {\n    if (Object.isUndefined(value)) return element.value;\n    else element.value = value;\n  },\n\n  select: function(element, value) {\n    if (Object.isUndefined(value))\n      return this[element.type == 'select-one' ?\n        'selectOne' : 'selectMany'](element);\n    else {\n      var opt, currentValue, single = !Object.isArray(value);\n      for (var i = 0, length = element.length; i < length; i++) {\n        opt = element.options[i];\n        currentValue = this.optionValue(opt);\n        if (single) {\n          if (currentValue == value) {\n            opt.selected = true;\n            return;\n          }\n        }\n        else opt.selected = value.include(currentValue);\n      }\n    }\n  },\n\n  selectOne: function(element) {\n    var index = element.selectedIndex;\n    return index >= 0 ? this.optionValue(element.options[index]) : null;\n  },\n\n  selectMany: function(element) {\n    var values, length = element.length;\n    if (!length) return null;\n\n    for (var i = 0, values = []; i < length; i++) {\n      var opt = element.options[i];\n      if (opt.selected) values.push(this.optionValue(opt));\n    }\n    return values;\n  },\n\n  optionValue: function(opt) {\n    return Element.extend(opt).hasAttribute('value') ? opt.value : opt.text;\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\n\nAbstract.TimedObserver = Class.create(PeriodicalExecuter, {\n  initialize: function($super, element, frequency, callback) {\n    $super(callback, frequency);\n    this.element   = $(element);\n    this.lastValue = this.getValue();\n  },\n\n  execute: function() {\n    var value = this.getValue();\n    if (Object.isString(this.lastValue) && Object.isString(value) ?\n        this.lastValue != value : String(this.lastValue) != String(value)) {\n      this.callback(this.element, value);\n      this.lastValue = value;\n    }\n  }\n});\n\nForm.Element.Observer = Class.create(Abstract.TimedObserver, {\n  getValue: function() {\n    return Form.Element.getValue(this.element);\n  }\n});\n\nForm.Observer = Class.create(Abstract.TimedObserver, {\n  getValue: function() {\n    return Form.serialize(this.element);\n  }\n});\n\n/*--------------------------------------------------------------------------*/\n\nAbstract.EventObserver = Class.create({\n  initialize: function(element, callback) {\n    this.element  = $(element);\n    this.callback = callback;\n\n    this.lastValue = this.getValue();\n    if (this.element.tagName.toLowerCase() == 'form')\n      this.registerFormCallbacks();\n    else\n      this.registerCallback(this.element);\n  },\n\n  onElementEvent: function() {\n    var value = this.getValue();\n    if (this.lastValue != value) {\n      this.callback(this.element, value);\n      this.lastValue = value;\n    }\n  },\n\n  registerFormCallbacks: function() {\n    Form.getElements(this.element).each(this.registerCallback, this);\n  },\n\n  registerCallback: function(element) {\n    if (element.type) {\n      switch (element.type.toLowerCase()) {\n        case 'checkbox':\n        case 'radio':\n          Event.observe(element, 'click', this.onElementEvent.bind(this));\n          break;\n        default:\n          Event.observe(element, 'change', this.onElementEvent.bind(this));\n          break;\n      }\n    }\n  }\n});\n\nForm.Element.EventObserver = Class.create(Abstract.EventObserver, {\n  getValue: function() {\n    return Form.Element.getValue(this.element);\n  }\n});\n\nForm.EventObserver = Class.create(Abstract.EventObserver, {\n  getValue: function() {\n    return Form.serialize(this.element);\n  }\n});\n(function() {\n\n  var Event = {\n    KEY_BACKSPACE: 8,\n    KEY_TAB:       9,\n    KEY_RETURN:   13,\n    KEY_ESC:      27,\n    KEY_LEFT:     37,\n    KEY_UP:       38,\n    KEY_RIGHT:    39,\n    KEY_DOWN:     40,\n    KEY_DELETE:   46,\n    KEY_HOME:     36,\n    KEY_END:      35,\n    KEY_PAGEUP:   33,\n    KEY_PAGEDOWN: 34,\n    KEY_INSERT:   45,\n\n    cache: {}\n  };\n\n  var docEl = document.documentElement;\n  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl\n    && 'onmouseleave' in docEl;\n\n  var _isButton;\n  if (Prototype.Browser.IE) {\n    var buttonMap = { 0: 1, 1: 4, 2: 2 };\n    _isButton = function(event, code) {\n      return event.button === buttonMap[code];\n    };\n  } else if (Prototype.Browser.WebKit) {\n    _isButton = function(event, code) {\n      switch (code) {\n        case 0: return event.which == 1 && !event.metaKey;\n        case 1: return event.which == 1 && event.metaKey;\n        default: return false;\n      }\n    };\n  } else {\n    _isButton = function(event, code) {\n      return event.which ? (event.which === code + 1) : (event.button === code);\n    };\n  }\n\n  function isLeftClick(event)   { return _isButton(event, 0) }\n\n  function isMiddleClick(event) { return _isButton(event, 1) }\n\n  function isRightClick(event)  { return _isButton(event, 2) }\n\n  function element(event) {\n    event = Event.extend(event);\n\n    var node = event.target, type = event.type,\n     currentTarget = event.currentTarget;\n\n    if (currentTarget && currentTarget.tagName) {\n      if (type === 'load' || type === 'error' ||\n        (type === 'click' && currentTarget.tagName.toLowerCase() === 'input'\n          && currentTarget.type === 'radio'))\n            node = currentTarget;\n    }\n\n    if (node.nodeType == Node.TEXT_NODE)\n      node = node.parentNode;\n\n    return Element.extend(node);\n  }\n\n  function findElement(event, expression) {\n    var element = Event.element(event);\n    if (!expression) return element;\n    var elements = [element].concat(element.ancestors());\n    return Selector.findElement(elements, expression, 0);\n  }\n\n  function pointer(event) {\n    return { x: pointerX(event), y: pointerY(event) };\n  }\n\n  function pointerX(event) {\n    var docElement = document.documentElement,\n     body = document.body || { scrollLeft: 0 };\n\n    return event.pageX || (event.clientX +\n      (docElement.scrollLeft || body.scrollLeft) -\n      (docElement.clientLeft || 0));\n  }\n\n  function pointerY(event) {\n    var docElement = document.documentElement,\n     body = document.body || { scrollTop: 0 };\n\n    return  event.pageY || (event.clientY +\n       (docElement.scrollTop || body.scrollTop) -\n       (docElement.clientTop || 0));\n  }\n\n\n  function stop(event) {\n    Event.extend(event);\n    event.preventDefault();\n    event.stopPropagation();\n\n    event.stopped = true;\n  }\n\n  Event.Methods = {\n    isLeftClick: isLeftClick,\n    isMiddleClick: isMiddleClick,\n    isRightClick: isRightClick,\n\n    element: element,\n    findElement: findElement,\n\n    pointer: pointer,\n    pointerX: pointerX,\n    pointerY: pointerY,\n\n    stop: stop\n  };\n\n\n  var methods = Object.keys(Event.Methods).inject({ }, function(m, name) {\n    m[name] = Event.Methods[name].methodize();\n    return m;\n  });\n\n  if (Prototype.Browser.IE) {\n    function _relatedTarget(event) {\n      var element;\n      switch (event.type) {\n        case 'mouseover': element = event.fromElement; break;\n        case 'mouseout':  element = event.toElement;   break;\n        default: return null;\n      }\n      return Element.extend(element);\n    }\n\n    Object.extend(methods, {\n      stopPropagation: function() { this.cancelBubble = true },\n      preventDefault:  function() { this.returnValue = false },\n      inspect: function() { return '[object Event]' }\n    });\n\n    Event.extend = function(event, element) {\n      if (!event) return false;\n      if (event._extendedByPrototype) return event;\n\n      event._extendedByPrototype = Prototype.emptyFunction;\n      var pointer = Event.pointer(event);\n\n      Object.extend(event, {\n        target: event.srcElement || element,\n        relatedTarget: _relatedTarget(event),\n        pageX:  pointer.x,\n        pageY:  pointer.y\n      });\n\n      return Object.extend(event, methods);\n    };\n  } else {\n    Event.prototype = window.Event.prototype || document.createEvent('HTMLEvents').__proto__;\n    Object.extend(Event.prototype, methods);\n    Event.extend = Prototype.K;\n  }\n\n  function _createResponder(element, eventName, handler) {\n    var registry = Element.retrieve(element, 'prototype_event_registry');\n\n    if (Object.isUndefined(registry)) {\n      CACHE.push(element);\n      registry = Element.retrieve(element, 'prototype_event_registry', $H());\n    }\n\n    var respondersForEvent = registry.get(eventName);\n    if (Object.isUndefined(respondersForEvent)) {\n      respondersForEvent = [];\n      registry.set(eventName, respondersForEvent);\n    }\n\n    if (respondersForEvent.pluck('handler').include(handler)) return false;\n\n    var responder;\n    if (eventName.include(\":\")) {\n      responder = function(event) {\n        if (Object.isUndefined(event.eventName))\n          return false;\n\n        if (event.eventName !== eventName)\n          return false;\n\n        Event.extend(event, element);\n        handler.call(element, event);\n      };\n    } else {\n      if (!MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED &&\n       (eventName === \"mouseenter\" || eventName === \"mouseleave\")) {\n        if (eventName === \"mouseenter\" || eventName === \"mouseleave\") {\n          responder = function(event) {\n            Event.extend(event, element);\n\n            var parent = event.relatedTarget;\n            while (parent && parent !== element) {\n              try { parent = parent.parentNode; }\n              catch(e) { parent = element; }\n            }\n\n            if (parent === element) return;\n\n            handler.call(element, event);\n          };\n        }\n      } else {\n        responder = function(event) {\n          Event.extend(event, element);\n          handler.call(element, event);\n        };\n      }\n    }\n\n    responder.handler = handler;\n    respondersForEvent.push(responder);\n    return responder;\n  }\n\n  function _destroyCache() {\n    for (var i = 0, length = CACHE.length; i < length; i++) {\n      Event.stopObserving(CACHE[i]);\n      CACHE[i] = null;\n    }\n  }\n\n  var CACHE = [];\n\n  if (Prototype.Browser.IE)\n    window.attachEvent('onunload', _destroyCache);\n\n  if (Prototype.Browser.WebKit)\n    window.addEventListener('unload', Prototype.emptyFunction, false);\n\n\n  var _getDOMEventName = Prototype.K;\n\n  if (!MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED) {\n    _getDOMEventName = function(eventName) {\n      var translations = { mouseenter: \"mouseover\", mouseleave: \"mouseout\" };\n      return eventName in translations ? translations[eventName] : eventName;\n    };\n  }\n\n  function observe(element, eventName, handler) {\n    element = $(element);\n\n    var responder = _createResponder(element, eventName, handler);\n\n    if (!responder) return element;\n\n    if (eventName.include(':')) {\n      if (element.addEventListener)\n        element.addEventListener(\"dataavailable\", responder, false);\n      else {\n        element.attachEvent(\"ondataavailable\", responder);\n        element.attachEvent(\"onfilterchange\", responder);\n      }\n    } else {\n      var actualEventName = _getDOMEventName(eventName);\n\n      if (element.addEventListener)\n        element.addEventListener(actualEventName, responder, false);\n      else\n        element.attachEvent(\"on\" + actualEventName, responder);\n    }\n\n    return element;\n  }\n\n  function stopObserving(element, eventName, handler) {\n    element = $(element);\n\n    var registry = Element.retrieve(element, 'prototype_event_registry');\n\n    if (Object.isUndefined(registry)) return element;\n\n    if (eventName && !handler) {\n      var responders = registry.get(eventName);\n\n      if (Object.isUndefined(responders)) return element;\n\n      responders.each( function(r) {\n        Element.stopObserving(element, eventName, r.handler);\n      });\n      return element;\n    } else if (!eventName) {\n      registry.each( function(pair) {\n        var eventName = pair.key, responders = pair.value;\n\n        responders.each( function(r) {\n          Element.stopObserving(element, eventName, r.handler);\n        });\n      });\n      return element;\n    }\n\n    var responders = registry.get(eventName);\n\n    if (!responders) return;\n\n    var responder = responders.find( function(r) { return r.handler === handler; });\n    if (!responder) return element;\n\n    var actualEventName = _getDOMEventName(eventName);\n\n    if (eventName.include(':')) {\n      if (element.removeEventListener)\n        element.removeEventListener(\"dataavailable\", responder, false);\n      else {\n        element.detachEvent(\"ondataavailable\", responder);\n        element.detachEvent(\"onfilterchange\",  responder);\n      }\n    } else {\n      if (element.removeEventListener)\n        element.removeEventListener(actualEventName, responder, false);\n      else\n        element.detachEvent('on' + actualEventName, responder);\n    }\n\n    registry.set(eventName, responders.without(responder));\n\n    return element;\n  }\n\n  function fire(element, eventName, memo, bubble) {\n    element = $(element);\n\n    if (Object.isUndefined(bubble))\n      bubble = true;\n\n    if (element == document && document.createEvent && !element.dispatchEvent)\n      element = document.documentElement;\n\n    var event;\n    if (document.createEvent) {\n      event = document.createEvent('HTMLEvents');\n      event.initEvent('dataavailable', true, true);\n    } else {\n      event = document.createEventObject();\n      event.eventType = bubble ? 'ondataavailable' : 'onfilterchange';\n    }\n\n    event.eventName = eventName;\n    event.memo = memo || { };\n\n    if (document.createEvent)\n      element.dispatchEvent(event);\n    else\n      element.fireEvent(event.eventType, event);\n\n    return Event.extend(event);\n  }\n\n\n  Object.extend(Event, Event.Methods);\n\n  Object.extend(Event, {\n    fire:          fire,\n    observe:       observe,\n    stopObserving: stopObserving\n  });\n\n  Element.addMethods({\n    fire:          fire,\n\n    observe:       observe,\n\n    stopObserving: stopObserving\n  });\n\n  Object.extend(document, {\n    fire:          fire.methodize(),\n\n    observe:       observe.methodize(),\n\n    stopObserving: stopObserving.methodize(),\n\n    loaded:        false\n  });\n\n  if (window.Event) Object.extend(window.Event, Event);\n  else window.Event = Event;\n})();\n\n(function() {\n  /* Support for the DOMContentLoaded event is based on work by Dan Webb,\n     Matthias Miller, Dean Edwards, John Resig, and Diego Perini. */\n\n  var timer;\n\n  function fireContentLoadedEvent() {\n    if (document.loaded) return;\n    if (timer) window.clearTimeout(timer);\n    document.loaded = true;\n    document.fire('dom:loaded');\n  }\n\n  function checkReadyState() {\n    if (document.readyState === 'complete') {\n      document.stopObserving('readystatechange', checkReadyState);\n      fireContentLoadedEvent();\n    }\n  }\n\n  function pollDoScroll() {\n    try { document.documentElement.doScroll('left'); }\n    catch(e) {\n      timer = pollDoScroll.defer();\n      return;\n    }\n    fireContentLoadedEvent();\n  }\n\n  if (document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', fireContentLoadedEvent, false);\n  } else {\n    document.observe('readystatechange', checkReadyState);\n    if (window == top)\n      timer = pollDoScroll.defer();\n  }\n\n  Event.observe(window, 'load', fireContentLoadedEvent);\n})();\n\nElement.addMethods();\n\n/*------------------------------- DEPRECATED -------------------------------*/\n\nHash.toQueryString = Object.toQueryString;\n\nvar Toggle = { display: Element.toggle };\n\nElement.Methods.childOf = Element.Methods.descendantOf;\n\nvar Insertion = {\n  Before: function(element, content) {\n    return Element.insert(element, {before:content});\n  },\n\n  Top: function(element, content) {\n    return Element.insert(element, {top:content});\n  },\n\n  Bottom: function(element, content) {\n    return Element.insert(element, {bottom:content});\n  },\n\n  After: function(element, content) {\n    return Element.insert(element, {after:content});\n  }\n};\n\nvar $continue = new Error('\"throw $continue\" is deprecated, use \"return\" instead');\n\nvar Position = {\n  includeScrollOffsets: false,\n\n  prepare: function() {\n    this.deltaX =  window.pageXOffset\n                || document.documentElement.scrollLeft\n                || document.body.scrollLeft\n                || 0;\n    this.deltaY =  window.pageYOffset\n                || document.documentElement.scrollTop\n                || document.body.scrollTop\n                || 0;\n  },\n\n  within: function(element, x, y) {\n    if (this.includeScrollOffsets)\n      return this.withinIncludingScrolloffsets(element, x, y);\n    this.xcomp = x;\n    this.ycomp = y;\n    this.offset = Element.cumulativeOffset(element);\n\n    return (y >= this.offset[1] &&\n            y <  this.offset[1] + element.offsetHeight &&\n            x >= this.offset[0] &&\n            x <  this.offset[0] + element.offsetWidth);\n  },\n\n  withinIncludingScrolloffsets: function(element, x, y) {\n    var offsetcache = Element.cumulativeScrollOffset(element);\n\n    this.xcomp = x + offsetcache[0] - this.deltaX;\n    this.ycomp = y + offsetcache[1] - this.deltaY;\n    this.offset = Element.cumulativeOffset(element);\n\n    return (this.ycomp >= this.offset[1] &&\n            this.ycomp <  this.offset[1] + element.offsetHeight &&\n            this.xcomp >= this.offset[0] &&\n            this.xcomp <  this.offset[0] + element.offsetWidth);\n  },\n\n  overlap: function(mode, element) {\n    if (!mode) return 0;\n    if (mode == 'vertical')\n      return ((this.offset[1] + element.offsetHeight) - this.ycomp) /\n        element.offsetHeight;\n    if (mode == 'horizontal')\n      return ((this.offset[0] + element.offsetWidth) - this.xcomp) /\n        element.offsetWidth;\n  },\n\n\n  cumulativeOffset: Element.Methods.cumulativeOffset,\n\n  positionedOffset: Element.Methods.positionedOffset,\n\n  absolutize: function(element) {\n    Position.prepare();\n    return Element.absolutize(element);\n  },\n\n  relativize: function(element) {\n    Position.prepare();\n    return Element.relativize(element);\n  },\n\n  realOffset: Element.Methods.cumulativeScrollOffset,\n\n  offsetParent: Element.Methods.getOffsetParent,\n\n  page: Element.Methods.viewportOffset,\n\n  clone: function(source, target, options) {\n    options = options || { };\n    return Element.clonePosition(target, source, options);\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\nif (!document.getElementsByClassName) document.getElementsByClassName = function(instanceMethods){\n  function iter(name) {\n    return name.blank() ? null : \"[contains(concat(' ', @class, ' '), ' \" + name + \" ')]\";\n  }\n\n  instanceMethods.getElementsByClassName = Prototype.BrowserFeatures.XPath ?\n  function(element, className) {\n    className = className.toString().strip();\n    var cond = /\\s/.test(className) ? $w(className).map(iter).join('') : iter(className);\n    return cond ? document._getElementsByXPath('.//*' + cond, element) : [];\n  } : function(element, className) {\n    className = className.toString().strip();\n    var elements = [], classNames = (/\\s/.test(className) ? $w(className) : null);\n    if (!classNames && !className) return elements;\n\n    var nodes = $(element).getElementsByTagName('*');\n    className = ' ' + className + ' ';\n\n    for (var i = 0, child, cn; child = nodes[i]; i++) {\n      if (child.className && (cn = ' ' + child.className + ' ') && (cn.include(className) ||\n          (classNames && classNames.all(function(name) {\n            return !name.toString().blank() && cn.include(' ' + name + ' ');\n          }))))\n        elements.push(Element.extend(child));\n    }\n    return elements;\n  };\n\n  return function(className, parentElement) {\n    return $(parentElement || document.body).getElementsByClassName(className);\n  };\n}(Element.Methods);\n\n/*--------------------------------------------------------------------------*/\n\nElement.ClassNames = Class.create();\nElement.ClassNames.prototype = {\n  initialize: function(element) {\n    this.element = $(element);\n  },\n\n  _each: function(iterator) {\n    this.element.className.split(/\\s+/).select(function(name) {\n      return name.length > 0;\n    })._each(iterator);\n  },\n\n  set: function(className) {\n    this.element.className = className;\n  },\n\n  add: function(classNameToAdd) {\n    if (this.include(classNameToAdd)) return;\n    this.set($A(this).concat(classNameToAdd).join(' '));\n  },\n\n  remove: function(classNameToRemove) {\n    if (!this.include(classNameToRemove)) return;\n    this.set($A(this).without(classNameToRemove).join(' '));\n  },\n\n  toString: function() {\n    return $A(this).join(' ');\n  }\n};\n\nObject.extend(Element.ClassNames.prototype, Enumerable);\n\n/*--------------------------------------------------------------------------*/\n"]}