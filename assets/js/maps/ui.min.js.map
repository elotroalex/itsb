{"version":3,"sources":["ui.js"],"names":["UI","[object Object]","this","palette","clr1","clr2","clr3","black","white","neutral","darkneutral","coolneutral","dom","tabs","document","getElementById","children","panels","i","length","setAttribute","onclick","j","style","display","classList","remove","k","add","getAttribute","h","window","innerHeight","clientHeight","intersections","map","header","obj","list","count","prop","authors","hasOwnProperty","authorItemTemplate","name","key","tag","escapeHtml","string","entityMap","&","<",">","\"","'","/","`","=","String","replace","s","IntersectionsUI","super","eint","elem","legend","getElementsByClassName","dateslider","datestart","dateend","view","results","title","initLegendUI","d3","select","on","transition","duration","TrajectoriesUI","etra","trajectories","ItinerariesUI","eiti","itineraries","selections","author1","author2","SearchUI","searchfield","searchresults"],"mappings":"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","file":"../ui.min.js","sourcesContent":["/* global d3 */\r\n\r\nclass UI {\r\n\t\r\n  constructor(){\r\n            \r\n    // Mirrors variables in assets/sass/style.css\r\n    \r\n    this.palette = {\r\n      clr1:        '#EE7B22', // Orange\r\n      clr2:        '#F9D5B6', // Canteloupe\r\n      clr3:        '#D2D9AC', // Green \r\n      black:       '#161C1E',\r\n      white:       '#F7F8F9',\r\n      neutral:     '#F9F9F9',\r\n      darkneutral: '#2D393F', // Charcoal\r\n      coolneutral: '#E2E5E8' // Cool blue\r\n    }\r\n    \r\n    this.dom = {};\r\n    \r\n    \r\n    /*    \r\n    this.dom = {\r\n      tabs: document.getElementById('tabs').getElementsByTagName('a'),\r\n    };\r\n    */    \r\n  } \r\n  \r\n  /* LEGACY METHOD. Script no longer handles panel UI. Left for reference. */ \r\n    \r\n  initPanels() {\r\n            \r\n    var tabs = document.getElementById(\"tabs\").children;\r\n    var panels = document.getElementById(\"panels\").children;\r\n    \r\n    for(var i=0;i<tabs.length;i++) {\r\n      tabs[i].setAttribute('data-panel',i);\r\n      tabs[i].onclick = function() {\r\n        for(var j=0;j<panels.length;j++) {\r\n          panels[j].style.display = 'none';\r\n          panels[j].classList.remove('selected');\r\n        }\r\n        for(var k=0;k<panels.length;k++) {\r\n          tabs[k].classList.remove('active');\r\n        }\r\n        this.classList.add('active');\r\n        panels[this.getAttribute('data-panel')].style.display = 'block';\r\n        panels[this.getAttribute('data-panel')].classList.add('selected');\r\n\r\n      }\r\n    }\r\n    \r\n    // set the minimum height of the panels, which should be the window height less the nav elements`.\r\n    \r\n    var h = window.innerHeight - document.getElementById('nav').clientHeight - this.dom.intersections.map.header.clientHeight; \r\n        \r\n    document.getElementById('panels').setAttribute(\"style\",\"min-height:\" + h + \"px\");\r\n  }\r\n  \r\n  generateAuthorList(obj) {\r\n    \r\n    var list = '';\r\n    var i = 1;\r\n    var count = 1;\r\n    \r\n    for (var prop in obj.authors) {\r\n      \r\n      if (i%2 != 0) {\r\n        list += \"<div class='arow'>\\n\";\r\n      }\r\n      \r\n      if (obj.authors.hasOwnProperty(prop)) {        \r\n        list += this.authorItemTemplate(obj.authors[prop],prop,'a',count) + \"\\n\";\r\n      }\r\n      \r\n      if (i%2 == 0) {\r\n        list += \"</div>\\n\";\r\n      }\r\n      \r\n      i = i == 2 ? 1 : 2;\r\n      count++;\r\n    }\r\n    \r\n    return list;\r\n    \r\n  }\r\n  \r\n  authorItemTemplate(name,key,tag,count) {\r\n    return \"<\" + tag + \" data-key='\" + key + \"' class='author a-\" + count + \"' title='\" + this.escapeHtml(name) + \"'>\" + name + \"</\" + tag + \">\";\r\n  }\r\n  \r\n\r\n  escapeHtml (string) {\r\n    var entityMap = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#39;',\r\n      '/': '&#x2F;',\r\n      '`': '&#x60;',\r\n      '=': '&#x3D;'\r\n    };\r\n\r\n    return String(string).replace(/[&<>\"'`=\\/]/g, function (s) {\r\n      return entityMap[s];\r\n    });\r\n  }  \r\n  \r\n}\r\n\r\nclass IntersectionsUI extends UI {\r\n  constructor(){\r\n    super();\r\n    var eint = document.getElementById('intersections');\r\n    \r\n    this.dom.intersections = {\r\n      elem: eint,\r\n      legend: eint.getElementsByClassName('legend')[0],\r\n      dateslider: eint.getElementsByClassName('slider')[0],\r\n      datestart: eint.getElementsByClassName('date-start')[0],\r\n      dateend: eint.getElementsByClassName('date-end')[0],\r\n      map: {\r\n        header: eint.getElementsByClassName('header')[1],\r\n        view: eint.getElementsByClassName('map')[0]\r\n      },\r\n      results: {\r\n        header: eint.getElementsByClassName('header')[2],\r\n        title: eint.getElementsByClassName('title')[0],\r\n        view: eint.getElementsByClassName('results-view')[0]\r\n      }\r\n    }\r\n    \r\n    this.initLegendUI();\r\n  }\r\n  \r\n  initLegendUI() {\r\n    d3.select(this.dom.intersections.legend).on('click',function(){\r\n      d3.select(this)\r\n        .transition()\r\n        .duration(800)\r\n        .style('opacity',0)\r\n        .remove();\r\n    });\r\n  }\r\n}\r\n\r\nclass TrajectoriesUI extends UI {\r\n  constructor() {\r\n    super();\r\n    var etra = document.getElementById('trajectories');\r\n    \r\n    this.dom.trajectories = {\r\n      elem: etra,\r\n      dateslider: etra.getElementsByClassName('slider')[0],\r\n      datestart: etra.getElementsByClassName('date-start')[0],\r\n      dateend: etra.getElementsByClassName('date-end')[0],\r\n      authors: {\r\n        header: etra.getElementsByClassName('header')[1],\r\n        list: etra.getElementsByClassName('authors-list')[0]\r\n      },\r\n      map: {\r\n        header: etra.getElementsByClassName('header')[2],\r\n        view: etra.getElementsByClassName('map')[0]\r\n      }\r\n    }\r\n  }  \r\n}\r\n\r\nclass ItinerariesUI extends UI {\r\n  constructor() {\r\n    super();\r\n    var eiti = document.getElementById('itineraries');\r\n    this.dom.itineraries = {\r\n      elem: eiti,\r\n      authors: {\r\n        selections: eiti.getElementsByClassName('selections')[0],\r\n        header: eiti.getElementsByClassName('header')[0],\r\n        list: eiti.getElementsByClassName('authors-list')[0],\r\n        author1: eiti.getElementsByClassName('author')[0],\r\n        author2: eiti.getElementsByClassName('author')[1]\r\n      },\r\n      selections: [\r\n        { \r\n          header: eiti.getElementsByClassName('itinerary-header')[0],\r\n          view: eiti.getElementsByClassName('itinerary-view')[0]\r\n        },\r\n        { \r\n          header: eiti.getElementsByClassName('itinerary-header')[1],\r\n          view: eiti.getElementsByClassName('itinerary-view')[1]\r\n        }\r\n      ]\r\n    }    \r\n    \r\n  }\r\n}\r\n\r\nclass SearchUI extends UI {\r\n  constructor() {\r\n    super();\r\n    this.dom = {\r\n      searchfield: document.getElementById('search-field'),\r\n      searchresults: document.getElementById('search-results')\r\n    };\r\n  }\r\n}"]}