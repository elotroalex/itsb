{"version":3,"sources":["archive/phase 2/ui.js"],"names":["UI","[object Object]","this","palette","clr1","clr2","clr3","black","white","neutral","darkneutral","coolneutral","eint","document","getElementById","etra","eiti","dom","tabs","getElementsByTagName","searchfield","searchresults","intersections","elem","legend","getElementsByClassName","dateslider","datestart","dateend","map","header","view","results","title","trajectories","authors","list","itineraries","selections","author1","author2","initLegendUI","d3","select","on","transition","duration","style","remove","children","panels","i","length","setAttribute","onclick","j","display","classList","k","add","getAttribute","h","window","innerHeight","clientHeight","obj","count","prop","hasOwnProperty","authorItemTemplate","name","key","tag","escapeHtml","string","entityMap","&","<",">","\"","'","/","`","=","String","replace","s","ui","initPanels"],"mappings":"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","file":"../../../archive/phase 2/ui.min.js","sourcesContent":["/* global d3 */\r\n\r\nclass UI {\r\n\t\r\n  constructor(){\r\n            \r\n    // Mirrors variables in assets/sass/style.css\r\n    \r\n    this.palette = {\r\n      clr1:        '#EE7B22', // Orange\r\n      clr2:        '#F9D5B6', // Canteloupe\r\n      clr3:        '#D2D9AC', // Green \r\n      black:       '#161C1E',\r\n      white:       '#F7F8F9',\r\n      neutral:     '#F9F9F9',\r\n      darkneutral: '#2D393F', // Charcoal\r\n      coolneutral: '#E2E5E8' // Cool blue\r\n    }\r\n    \r\n    var eint = document.getElementById('intersections');\r\n    var etra = document.getElementById('trajectories');\r\n    var eiti = document.getElementById('itineraries');\r\n    \r\n    // Model key DOM elements for each visualization\r\n    \r\n    this.dom = {\r\n      tabs: document.getElementById('tabs').getElementsByTagName('a'),\r\n      searchfield: document.getElementById('search-field'),\r\n      searchresults: document.getElementById('search-results')\r\n    };\r\n        \r\n    this.dom.intersections = {\r\n      elem: eint,\r\n      legend: eint.getElementsByClassName('legend')[0],\r\n      dateslider: eint.getElementsByClassName('slider')[0],\r\n      datestart: eint.getElementsByClassName('date-start')[0],\r\n      dateend: eint.getElementsByClassName('date-end')[0],\r\n      map: {\r\n        header: eint.getElementsByClassName('header')[1],\r\n        view: eint.getElementsByClassName('map')[0]\r\n      },\r\n      results: {\r\n        header: eint.getElementsByClassName('header')[2],\r\n        title: eint.getElementsByClassName('title')[0],\r\n        view: eint.getElementsByClassName('results-view')[0]\r\n      }\r\n    }\r\n    \r\n    this.dom.trajectories = {\r\n      elem: etra,\r\n      dateslider: etra.getElementsByClassName('slider')[0],\r\n      datestart: etra.getElementsByClassName('date-start')[0],\r\n      dateend: etra.getElementsByClassName('date-end')[0],\r\n      authors: {\r\n        header: etra.getElementsByClassName('header')[1],\r\n        list: etra.getElementsByClassName('authors-list')[0]\r\n      },\r\n      map: {\r\n        header: etra.getElementsByClassName('header')[2],\r\n        view: etra.getElementsByClassName('map')[0]\r\n      }\r\n    }\r\n    \r\n    this.dom.itineraries = {\r\n      elem: eiti,\r\n      authors: {\r\n        selections: eiti.getElementsByClassName('selections')[0],\r\n        header: eiti.getElementsByClassName('header')[0],\r\n        list: eiti.getElementsByClassName('authors-list')[0],\r\n        author1: eiti.getElementsByClassName('author')[0],\r\n        author2: eiti.getElementsByClassName('author')[1]\r\n      },\r\n      selections: [\r\n        { \r\n          header: eiti.getElementsByClassName('itinerary-header')[0],\r\n          view: eiti.getElementsByClassName('itinerary-view')[0]\r\n        },\r\n        { \r\n          header: eiti.getElementsByClassName('itinerary-header')[1],\r\n          view: eiti.getElementsByClassName('itinerary-view')[1]\r\n        }\r\n      ]\r\n    }\r\n    \r\n    this.initLegendUI();\r\n  }  \r\n  \r\n  initLegendUI() {\r\n    d3.select(this.dom.intersections.legend).on('click',function(){\r\n      d3.select(this)\r\n        .transition()\r\n        .duration(800)\r\n        .style('opacity',0)\r\n        .remove();\r\n    });\r\n  }\r\n  \r\n  initPanels() {\r\n            \r\n    var tabs = document.getElementById(\"tabs\").children;\r\n    var panels = document.getElementById(\"panels\").children;\r\n    \r\n    for(var i=0;i<tabs.length;i++) {\r\n      tabs[i].setAttribute('data-panel',i);\r\n      tabs[i].onclick = function() {\r\n        for(var j=0;j<panels.length;j++) {\r\n          panels[j].style.display = 'none';\r\n          panels[j].classList.remove('selected');\r\n        }\r\n        for(var k=0;k<panels.length;k++) {\r\n          tabs[k].classList.remove('active');\r\n        }\r\n        this.classList.add('active');\r\n        panels[this.getAttribute('data-panel')].style.display = 'block';\r\n        panels[this.getAttribute('data-panel')].classList.add('selected');\r\n\r\n      }\r\n    }\r\n    \r\n    // set the minimum height of the panels, which should be the window height less the nav elements`.\r\n    \r\n    var h = window.innerHeight - document.getElementById('nav').clientHeight - this.dom.intersections.map.header.clientHeight; \r\n        \r\n    document.getElementById('panels').setAttribute(\"style\",\"min-height:\" + h + \"px\");\r\n  }\r\n  \r\n  generateAuthorList(obj) {\r\n    \r\n    var list = '';\r\n    var i = 1;\r\n    var count = 1;\r\n    \r\n    for (var prop in obj.authors) {\r\n      \r\n      if (i%2 != 0) {\r\n        list += \"<div class='arow'>\\n\";\r\n      }\r\n      \r\n      if (obj.authors.hasOwnProperty(prop)) {        \r\n        list += this.authorItemTemplate(obj.authors[prop],prop,'a',count) + \"\\n\";\r\n      }\r\n      \r\n      if (i%2 == 0) {\r\n        list += \"</div>\\n\";\r\n      }\r\n      \r\n      i = i == 2 ? 1 : 2;\r\n      count++;\r\n    }\r\n    \r\n    return list;\r\n    \r\n  }\r\n  \r\n  authorItemTemplate(name,key,tag,count) {\r\n    return \"<\" + tag + \" data-key='\" + key + \"' class='author a-\" + count + \"' title='\" + this.escapeHtml(name) + \"'>\" + name + \"</\" + tag + \">\";\r\n  }\r\n  \r\n\r\n  escapeHtml (string) {\r\n    var entityMap = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#39;',\r\n      '/': '&#x2F;',\r\n      '`': '&#x60;',\r\n      '=': '&#x3D;'\r\n    };\r\n\r\n    return String(string).replace(/[&<>\"'`=\\/]/g, function (s) {\r\n      return entityMap[s];\r\n    });\r\n  }  \r\n  \r\n}\r\n\r\nvar ui = new UI;\r\nui.initPanels();\r\n"]}